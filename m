Return-Path: <linux-f2fs-devel-bounces@lists.sourceforge.net>
X-Original-To: lists+linux-f2fs-devel@lfdr.de
Delivered-To: lists+linux-f2fs-devel@lfdr.de
Received: from lists.sourceforge.net (lists.sourceforge.net [216.105.38.7])
	by mail.lfdr.de (Postfix) with ESMTPS id 3822886FB22
	for <lists+linux-f2fs-devel@lfdr.de>; Mon,  4 Mar 2024 08:52:57 +0100 (CET)
Received: from [127.0.0.1] (helo=sfs-ml-2.v29.lw.sourceforge.com)
	by sfs-ml-2.v29.lw.sourceforge.com with esmtp (Exim 4.95)
	(envelope-from <linux-f2fs-devel-bounces@lists.sourceforge.net>)
	id 1rh37w-0008Np-TC;
	Mon, 04 Mar 2024 07:52:49 +0000
Received: from [172.30.20.202] (helo=mx.sourceforge.net)
 by sfs-ml-2.v29.lw.sourceforge.com with esmtps (TLS1.2) tls
 TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 (Exim 4.95)
 (envelope-from <niuzhiguo84@gmail.com>) id 1rh37v-0008Nc-93
 for linux-f2fs-devel@lists.sourceforge.net;
 Mon, 04 Mar 2024 07:52:47 +0000
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
 d=sourceforge.net; s=x; h=Content-Transfer-Encoding:Content-Type:Cc:To:
 Subject:Message-ID:Date:From:In-Reply-To:References:MIME-Version:Sender:
 Reply-To:Content-ID:Content-Description:Resent-Date:Resent-From:Resent-Sender
 :Resent-To:Resent-Cc:Resent-Message-ID:List-Id:List-Help:List-Unsubscribe:
 List-Subscribe:List-Post:List-Owner:List-Archive;
 bh=E4wbgivd5+75Dv+XUKqvmXgCNe2XqRsJil0CRCI0gOU=; b=Vr233QnvHTd1wbGdci6cSAY0T/
 CSB78G7U+2ICHqunNSxuk4BnCPjqAy99OGx+0Uemvlz4M0jb658ZpY1OIZ/Hb9L2gYJWOIVS1ViqI
 85K4XI6MOMISuAh5k70GH1czB2TbD09Ah2LstVq8C75g8SWitpG10Bg5Ip8IZrGveiEY=;
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=sf.net; s=x
 ;
 h=Content-Transfer-Encoding:Content-Type:Cc:To:Subject:Message-ID:Date:From
 :In-Reply-To:References:MIME-Version:Sender:Reply-To:Content-ID:
 Content-Description:Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc
 :Resent-Message-ID:List-Id:List-Help:List-Unsubscribe:List-Subscribe:
 List-Post:List-Owner:List-Archive;
 bh=E4wbgivd5+75Dv+XUKqvmXgCNe2XqRsJil0CRCI0gOU=; b=CbnDsFbDDr7H8Nzt2IcJdfn4oB
 GcQQwjBSzcpCeU3GmaOAz6X8rT9ZqgnmrR2LLoVpB9eVcALLamOx6S6H8BeWQY/asZeW0AR9JH8Gg
 BsS1dbiE0yTwErgg04gW0rQbNn8957CwcCol7z5qUavvETSwMhmuBMEXP7jwH7f76xbo=;
Received: from mail-lf1-f50.google.com ([209.85.167.50])
 by sfi-mx-2.v28.lw.sourceforge.com with esmtps
 (TLS1.2:ECDHE-RSA-AES128-GCM-SHA256:128) (Exim 4.95)
 id 1rh37o-000848-Ak for linux-f2fs-devel@lists.sourceforge.net;
 Mon, 04 Mar 2024 07:52:47 +0000
Received: by mail-lf1-f50.google.com with SMTP id
 2adb3069b0e04-512e4f4e463so4175523e87.1
 for <linux-f2fs-devel@lists.sourceforge.net>;
 Sun, 03 Mar 2024 23:52:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20230601; t=1709538755; x=1710143555; darn=lists.sourceforge.net;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:from:to:cc:subject:date
 :message-id:reply-to;
 bh=E4wbgivd5+75Dv+XUKqvmXgCNe2XqRsJil0CRCI0gOU=;
 b=m9vBHD0i7J5x27P56HVJbkBeLdDlzTo1e3MjzWOQ5uchXWd6Ordz8gexnRHINhFAR9
 stC+FQb3tsvUwj7ezIEiEBWf0mypQfYvwTPPDRFlcJPZcnBu45zhu8i6CVIcOahRSYI1
 pYlEHnYuuYrEtIuVzMJWsyGS5c9VNM/Qjr37Egn2cZpy/h0qCWdCe2zPFuyJOVkgn2tM
 rlTaG5PlaQPiOmfJx3RKcleJPUH9jAzw/7RSdhmbFWZ1lzGHXgv6Wq84u1LxapBhy4Vj
 5d+1548yf05U57Kv4AEvwnHus02xPzPC5v1CgWZrFzKj/YXapo+xSbFwj7aSf0qYUc7s
 mUwg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20230601; t=1709538755; x=1710143555;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=E4wbgivd5+75Dv+XUKqvmXgCNe2XqRsJil0CRCI0gOU=;
 b=VYr8JWxe7Cx7fdCiaWgzr0AVYocZ0dYXisixhim5k/TOhM1N6w9417j7MRaBlyLMrO
 nrwHnrbTrAtBlUTYkb0n+1BcTW14MaIcHoU9MfAjcKNP9MUIJbT4aYogdJm2NqZY0be0
 z6PpdNZYIAZGIbNPgZeBtJDbXs2m0H8XG1XdsqycTIp+7RVeBp2V3JbPuj5+kLK4bY4e
 WFXARfKRvlxLlLK5Q+lqJkYB1E53PYWa4oH93yMlqvqrO3XXamhUvsMy9T94zCzkIjhH
 LoO6z2ZvXVrU/h00l10XbndnFyzpBCb13EWOApxrM39CRuZcqHlURRxJOJr8ne1NXTNE
 GeMQ==
X-Forwarded-Encrypted: i=1;
 AJvYcCU9ZrnEl89gRhklKFO0Kvt37qHCNZoLfS3/3ImW54t6AGaxuOV4AJ7mwRW4qDypwD7gHARLGLfe1SMKc7mWNiqM1zjRvsJbFnYKXz0ZsYW5zBAVxM4qCA==
X-Gm-Message-State: AOJu0Yy4AA8Y8eVPZbf66xy2Xewf14wqx5GDw0IKndNlZQjRhRyc/apI
 lflSKn/UZmtU83CbxglOEQWXg7AxlHnvhjBSZkLzHv1P9xttG1k0maqYJzJqV4hget+svtT5sVQ
 84I9T1zHjFjYbxp6/6pHFul8BTtc=
X-Google-Smtp-Source: AGHT+IGI8lhkeOLlr4j0ronceXg/nFZYLqUVtI16BzpMfKrWMEZPgxgiadDMsCfmkHRQMmK6qzmKMqPw9adG2ZuUp1I=
X-Received: by 2002:a05:6512:10d4:b0:513:3d98:440 with SMTP id
 k20-20020a05651210d400b005133d980440mr3924245lfg.53.1709538754406; Sun, 03
 Mar 2024 23:52:34 -0800 (PST)
MIME-Version: 1.0
References: <1709292976-13118-1-git-send-email-zhiguo.niu@unisoc.com>
 <7dc371ad-2448-4dd4-9551-8caef0a00d48@kernel.org>
 <CAHJ8P3+ZBuBu9Sdpm_6fxhY2sVyu97dXFKKLdtEF4shi_3Fs1Q@mail.gmail.com>
 <73197f36-4962-4a3d-a56c-8fd3494af7e5@kernel.org>
In-Reply-To: <73197f36-4962-4a3d-a56c-8fd3494af7e5@kernel.org>
From: Zhiguo Niu <niuzhiguo84@gmail.com>
Date: Mon, 4 Mar 2024 15:52:23 +0800
Message-ID: <CAHJ8P3Kiys7ZESM-J2oEBYs1dd+zAVQ2zrvg5t02eqXRMEudXQ@mail.gmail.com>
To: Chao Yu <chao@kernel.org>
X-Spam-Score: 0.0 (/)
X-Spam-Report: Spam detection software, running on the system "util-spamd-1.v13.lw.sourceforge.com",
 has NOT identified this incoming email as spam.  The original
 message has been attached to this so you can view it or label
 similar future email.  If you have any questions, see
 the administrator of that system for details.
 
 Content preview:  On Mon, Mar 4, 2024 at 3:17 PM Chao Yu wrote: > > On 2024/3/4
    11:33, Zhiguo Niu wrote: > > On Mon, Mar 4, 2024 at 11:19 AM Chao Yu wrote:
    > >> > >> On 2024/3/1 19:36, Zhiguo Niu wrote: > >>> n [...] 
 
 Content analysis details:   (0.0 points, 6.0 required)
 
  pts rule name              description
 ---- ---------------------- --------------------------------------------------
  0.0 SPF_HELO_NONE          SPF: HELO does not publish an SPF Record
  0.0 FREEMAIL_FROM          Sender email is commonly abused enduser mail
                             provider
                             [niuzhiguo84[at]gmail.com]
  0.2 FREEMAIL_ENVFROM_END_DIGIT Envelope-from freemail username ends
                             in digit
                             [niuzhiguo84[at]gmail.com]
 -0.0 SPF_PASS               SPF: sender matches SPF record
 -0.0 RCVD_IN_MSPIKE_H2      RBL: Average reputation (+2)
                             [209.85.167.50 listed in wl.mailspike.net]
 -0.0 RCVD_IN_DNSWL_NONE     RBL: Sender listed at https://www.dnswl.org/,
                              no trust
                             [209.85.167.50 listed in list.dnswl.org]
  0.1 DKIM_SIGNED            Message has a DKIM or DK signature, not necessarily
                             valid
 -0.1 DKIM_VALID_EF          Message has a valid DKIM or DK signature from
                             envelope-from domain
 -0.1 DKIM_VALID_AU          Message has a valid DKIM or DK signature from
                             author's domain
 -0.1 DKIM_VALID             Message has at least one valid DKIM or DK signature
 -0.0 T_SCC_BODY_TEXT_LINE   No description available.
X-Headers-End: 1rh37o-000848-Ak
Subject: Re: [f2fs-dev] [PATCH] f2fs: fix to check result of new_curseg in
 f2fs_allocate_segment_for_resize
X-BeenThere: linux-f2fs-devel@lists.sourceforge.net
X-Mailman-Version: 2.1.21
Precedence: list
List-Id: <linux-f2fs-devel.lists.sourceforge.net>
List-Unsubscribe: <https://lists.sourceforge.net/lists/options/linux-f2fs-devel>, 
 <mailto:linux-f2fs-devel-request@lists.sourceforge.net?subject=unsubscribe>
List-Archive: <http://sourceforge.net/mailarchive/forum.php?forum_name=linux-f2fs-devel>
List-Post: <mailto:linux-f2fs-devel@lists.sourceforge.net>
List-Help: <mailto:linux-f2fs-devel-request@lists.sourceforge.net?subject=help>
List-Subscribe: <https://lists.sourceforge.net/lists/listinfo/linux-f2fs-devel>, 
 <mailto:linux-f2fs-devel-request@lists.sourceforge.net?subject=subscribe>
Cc: ke.wang@unisoc.com, linux-kernel@vger.kernel.org,
 linux-f2fs-devel@lists.sourceforge.net, hongyu.jin@unisoc.com,
 Zhiguo Niu <zhiguo.niu@unisoc.com>, jaegeuk@kernel.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linux-f2fs-devel-bounces@lists.sourceforge.net

T24gTW9uLCBNYXIgNCwgMjAyNCBhdCAzOjE34oCvUE0gQ2hhbyBZdSA8Y2hhb0BrZXJuZWwub3Jn
PiB3cm90ZToKPgo+IE9uIDIwMjQvMy80IDExOjMzLCBaaGlndW8gTml1IHdyb3RlOgo+ID4gT24g
TW9uLCBNYXIgNCwgMjAyNCBhdCAxMToxOeKAr0FNIENoYW8gWXUgPGNoYW9Aa2VybmVsLm9yZz4g
d3JvdGU6Cj4gPj4KPiA+PiBPbiAyMDI0LzMvMSAxOTozNiwgWmhpZ3VvIE5pdSB3cm90ZToKPiA+
Pj4gbmV3X2N1cnNlZyBtYXkgcmV0dXJuIGVycm9yIGlmIGdldF9uZXdfc2VnbWVudCBmYWlsLCBz
byBpdHMgcmVzdWx0Cj4gPj4+IHNob3VsZCBiZSBjaGVjayBpbiBpdHMgY2FsbGVyIGYyZnNfYWxs
b2NhdGVfc2VnbWVudF9mb3JfcmVzaXplLAo+ID4+PiBhbG9zIHBhc3MgdGhpcyByZXN1bHRzIHRv
IGZyZWVfc2VnbWVudF9yYW5nZS4KPiA+Pgo+ID4+IFpoaWd1bywKPiA+Pgo+ID4+IFdoYXQgYWJv
dXQgaGFuZGxpbmcgYWxsIGVycm9yIHBhdGhzIG9mIG5ld19jdXJzZWcoKSBhbmQgY2hhbmdlX2N1
cnNlZygpCj4gPj4gaW4gb25lIHBhdGNoPwo+ID4gRGVhciBDaGFvLAo+ID4KPiA+IERvIHlvdSBt
ZWFuIHRvIG1lcmdlIGl0IHdpdGggdGhlIHByZXZpb3VzIHBhdGNoIOKAnGYyZnM6IGZpeCB0byBj
aGVjawo+ID4gcmV0dXJuIHZhbHVlIG9mIGYyZnNfZ2NfcmFuZ2XigJ0/Cj4gPiBCZWNhdXNlIGlu
IGFkZGl0aW9uIHRvIG5ld19jdXJzZWcvY2hhbmdlX2N1cnNlZyBlcnJvciBoYW5kbGluZywgdGhl
cmUKPiA+IGFyZSBzb21lIG90aGVyIGNoYW5nZXMgaW4gdGhlIHByZXZpb3VzIHBhdGNoLgo+ID4g
YmVzaWRlcywgSSBzZWFyY2hlZCBmb3IgbmV3IHJlbGF0ZWQgY29kZXMsIGFuZCB0aGVyZSBzaG91
bGQgYmUgdGhlCj4gPiBvbmx5IHBsYWNlIGxlZnQgd2l0aG91dCBlcnJvciBoYW5kbGluZyBhYm91
dCBuZXdfY3Vyc2VnLwo+ID4gY2hhbmdlX2N1cnNlZyAuCj4KPiBaaGlndW8sIEkgbWVhbnQgc29t
ZXRoaW5nIGxpa2UgdGhpcz8KPgo+IFN1YmplY3Q6IFtQQVRDSF0gZjJmczogZml4IHRvIGhhbmRs
ZSBlcnJvciBwYXRocyBvZiB7bmV3LGNoYW5nZX1fY3Vyc2VnKCkKRGVhciBDaGFvLApJIGdvdCB5
b3VyIG1lYW5pbmcgYW5kIEkgdGhpbmsgdGhpcyBwYXRjaCBsb29rcyBnb29kLgpQbGVhc2UgaWdu
b3JlIG15IHBhdGNoIGFuZCB1c2UgeW91ciB2ZXJzaW9uOu+8iS4KdGhhbmtzIQo+Cj4gLS0tCj4g
ICBmcy9mMmZzL2YyZnMuaCAgICB8ICA0ICstLQo+ICAgZnMvZjJmcy9nYy5jICAgICAgfCAgNyAr
KystLQo+ICAgZnMvZjJmcy9zZWdtZW50LmMgfCA2NyArKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrLS0tLS0tLS0tLS0tLS0tLQo+ICAgZnMvZjJmcy9zdXBlci5jICAgfCAgNCArKy0KPiAg
IDQgZmlsZXMgY2hhbmdlZCwgNTQgaW5zZXJ0aW9ucygrKSwgMjggZGVsZXRpb25zKC0pCj4KPiBk
aWZmIC0tZ2l0IGEvZnMvZjJmcy9mMmZzLmggYi9mcy9mMmZzL2YyZnMuaAo+IGluZGV4IDgwNzg5
MjU1YmY2OC4uMDM5MjdmMWIyZWExIDEwMDY0NAo+IC0tLSBhL2ZzL2YyZnMvZjJmcy5oCj4gKysr
IGIvZnMvZjJmcy9mMmZzLmgKPiBAQCAtMzcwMiwxMCArMzcwMiwxMCBAQCBpbnQgZjJmc19kaXNh
YmxlX2NwX2FnYWluKHN0cnVjdCBmMmZzX3NiX2luZm8gKnNiaSwgYmxvY2tfdCB1bnVzYWJsZSk7
Cj4gICB2b2lkIGYyZnNfcmVsZWFzZV9kaXNjYXJkX2FkZHJzKHN0cnVjdCBmMmZzX3NiX2luZm8g
KnNiaSk7Cj4gICBpbnQgZjJmc19ucGFnZXNfZm9yX3N1bW1hcnlfZmx1c2goc3RydWN0IGYyZnNf
c2JfaW5mbyAqc2JpLCBib29sIGZvcl9yYSk7Cj4gICBib29sIGYyZnNfc2VnbWVudF9oYXNfZnJl
ZV9zbG90KHN0cnVjdCBmMmZzX3NiX2luZm8gKnNiaSwgaW50IHNlZ25vKTsKPiAtdm9pZCBmMmZz
X2luaXRfaW5tZW1fY3Vyc2VnKHN0cnVjdCBmMmZzX3NiX2luZm8gKnNiaSk7Cj4gK2ludCBmMmZz
X2luaXRfaW5tZW1fY3Vyc2VnKHN0cnVjdCBmMmZzX3NiX2luZm8gKnNiaSk7Cj4gICB2b2lkIGYy
ZnNfc2F2ZV9pbm1lbV9jdXJzZWcoc3RydWN0IGYyZnNfc2JfaW5mbyAqc2JpKTsKPiAgIHZvaWQg
ZjJmc19yZXN0b3JlX2lubWVtX2N1cnNlZyhzdHJ1Y3QgZjJmc19zYl9pbmZvICpzYmkpOwo+IC12
b2lkIGYyZnNfYWxsb2NhdGVfc2VnbWVudF9mb3JfcmVzaXplKHN0cnVjdCBmMmZzX3NiX2luZm8g
KnNiaSwgaW50IHR5cGUsCj4gK2ludCBmMmZzX2FsbG9jYXRlX3NlZ21lbnRfZm9yX3Jlc2l6ZShz
dHJ1Y3QgZjJmc19zYl9pbmZvICpzYmksIGludCB0eXBlLAo+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBpbnQgc3RhcnQsIHVuc2lnbmVkIGludCBlbmQp
Owo+ICAgaW50IGYyZnNfYWxsb2NhdGVfbmV3X3NlY3Rpb24oc3RydWN0IGYyZnNfc2JfaW5mbyAq
c2JpLCBpbnQgdHlwZSwgYm9vbCBmb3JjZSk7Cj4gICBpbnQgZjJmc19hbGxvY2F0ZV9waW5uaW5n
X3NlY3Rpb24oc3RydWN0IGYyZnNfc2JfaW5mbyAqc2JpKTsKPiBkaWZmIC0tZ2l0IGEvZnMvZjJm
cy9nYy5jIGIvZnMvZjJmcy9nYy5jCj4gaW5kZXggZjgzMTQ3NjUyNDZhLi44NTRhZDBhM2Y2ZWEg
MTAwNjQ0Cj4gLS0tIGEvZnMvZjJmcy9nYy5jCj4gKysrIGIvZnMvZjJmcy9nYy5jCj4gQEAgLTIw
MzMsOCArMjAzMywxMSBAQCBzdGF0aWMgaW50IGZyZWVfc2VnbWVudF9yYW5nZShzdHJ1Y3QgZjJm
c19zYl9pbmZvICpzYmksCj4gICAgICAgICBtdXRleF91bmxvY2soJkRJUlRZX0koc2JpKS0+c2Vn
bGlzdF9sb2NrKTsKPgo+ICAgICAgICAgLyogTW92ZSBvdXQgY3Vyc2VncyBmcm9tIHRoZSB0YXJn
ZXQgcmFuZ2UgKi8KPiAtICAgICAgIGZvciAodHlwZSA9IENVUlNFR19IT1RfREFUQTsgdHlwZSA8
IE5SX0NVUlNFR19QRVJTSVNUX1RZUEU7IHR5cGUrKykKPiAtICAgICAgICAgICAgICAgZjJmc19h
bGxvY2F0ZV9zZWdtZW50X2Zvcl9yZXNpemUoc2JpLCB0eXBlLCBzdGFydCwgZW5kKTsKPiArICAg
ICAgIGZvciAodHlwZSA9IENVUlNFR19IT1RfREFUQTsgdHlwZSA8IE5SX0NVUlNFR19QRVJTSVNU
X1RZUEU7IHR5cGUrKykgewo+ICsgICAgICAgICAgICAgICBlcnIgPSBmMmZzX2FsbG9jYXRlX3Nl
Z21lbnRfZm9yX3Jlc2l6ZShzYmksIHR5cGUsIHN0YXJ0LCBlbmQpOwo+ICsgICAgICAgICAgICAg
ICBpZiAoZXJyKQo+ICsgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gb3V0Owo+ICsgICAgICAg
fQo+Cj4gICAgICAgICAvKiBkbyBHQyB0byBtb3ZlIG91dCB2YWxpZCBibG9ja3MgaW4gdGhlIHJh
bmdlICovCj4gICAgICAgICBlcnIgPSBmMmZzX2djX3JhbmdlKHNiaSwgc3RhcnQsIGVuZCwgZHJ5
X3J1biwgMCk7Cj4gZGlmZiAtLWdpdCBhL2ZzL2YyZnMvc2VnbWVudC5jIGIvZnMvZjJmcy9zZWdt
ZW50LmMKPiBpbmRleCAyMjI0MWFiYTY1NjQuLjJiY2YwMWZkZTE0MyAxMDA2NDQKPiAtLS0gYS9m
cy9mMmZzL3NlZ21lbnQuYwo+ICsrKyBiL2ZzL2YyZnMvc2VnbWVudC5jCj4gQEAgLTI4NjMsNyAr
Mjg2Myw3IEBAIGJvb2wgZjJmc19zZWdtZW50X2hhc19mcmVlX3Nsb3Qoc3RydWN0IGYyZnNfc2Jf
aW5mbyAqc2JpLCBpbnQgc2Vnbm8pCj4gICAgKiBUaGlzIGZ1bmN0aW9uIGFsd2F5cyBhbGxvY2F0
ZXMgYSB1c2VkIHNlZ21lbnQoZnJvbSBkaXJ0eSBzZWdsaXN0KSBieSBTU1IKPiAgICAqIG1hbm5l
ciwgc28gaXQgc2hvdWxkIHJlY292ZXIgdGhlIGV4aXN0aW5nIHNlZ21lbnQgaW5mb3JtYXRpb24g
b2YgdmFsaWQgYmxvY2tzCj4gICAgKi8KPiAtc3RhdGljIHZvaWQgY2hhbmdlX2N1cnNlZyhzdHJ1
Y3QgZjJmc19zYl9pbmZvICpzYmksIGludCB0eXBlKQo+ICtzdGF0aWMgaW50IGNoYW5nZV9jdXJz
ZWcoc3RydWN0IGYyZnNfc2JfaW5mbyAqc2JpLCBpbnQgdHlwZSkKPiAgIHsKPiAgICAgICAgIHN0
cnVjdCBkaXJ0eV9zZWdsaXN0X2luZm8gKmRpcnR5X2kgPSBESVJUWV9JKHNiaSk7Cj4gICAgICAg
ICBzdHJ1Y3QgY3Vyc2VnX2luZm8gKmN1cnNlZyA9IENVUlNFR19JKHNiaSwgdHlwZSk7Cj4gQEAg
LTI4ODgsMjEgKzI4ODgsMjQgQEAgc3RhdGljIHZvaWQgY2hhbmdlX2N1cnNlZyhzdHJ1Y3QgZjJm
c19zYl9pbmZvICpzYmksIGludCB0eXBlKQo+ICAgICAgICAgaWYgKElTX0VSUihzdW1fcGFnZSkp
IHsKPiAgICAgICAgICAgICAgICAgLyogR0Mgd29uJ3QgYmUgYWJsZSB0byB1c2Ugc3RhbGUgc3Vt
bWFyeSBwYWdlcyBieSBjcF9lcnJvciAqLwo+ICAgICAgICAgICAgICAgICBtZW1zZXQoY3Vyc2Vn
LT5zdW1fYmxrLCAwLCBTVU1fRU5UUllfU0laRSk7Cj4gLSAgICAgICAgICAgICAgIHJldHVybjsK
PiArICAgICAgICAgICAgICAgcmV0dXJuIFBUUl9FUlIoc3VtX3BhZ2UpOwo+ICAgICAgICAgfQo+
ICAgICAgICAgc3VtX25vZGUgPSAoc3RydWN0IGYyZnNfc3VtbWFyeV9ibG9jayAqKXBhZ2VfYWRk
cmVzcyhzdW1fcGFnZSk7Cj4gICAgICAgICBtZW1jcHkoY3Vyc2VnLT5zdW1fYmxrLCBzdW1fbm9k
ZSwgU1VNX0VOVFJZX1NJWkUpOwo+ICAgICAgICAgZjJmc19wdXRfcGFnZShzdW1fcGFnZSwgMSk7
Cj4gKwo+ICsgICAgICAgcmV0dXJuIDA7Cj4gICB9Cj4KPiAgIHN0YXRpYyBpbnQgZ2V0X3Nzcl9z
ZWdtZW50KHN0cnVjdCBmMmZzX3NiX2luZm8gKnNiaSwgaW50IHR5cGUsCj4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBpbnQgYWxsb2NfbW9kZSwgdW5zaWduZWQgbG9uZyBsb25nIGFn
ZSk7Cj4KPiAtc3RhdGljIHZvaWQgZ2V0X2F0c3NyX3NlZ21lbnQoc3RydWN0IGYyZnNfc2JfaW5m
byAqc2JpLCBpbnQgdHlwZSwKPiArc3RhdGljIGludCBnZXRfYXRzc3Jfc2VnbWVudChzdHJ1Y3Qg
ZjJmc19zYl9pbmZvICpzYmksIGludCB0eXBlLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBpbnQgdGFyZ2V0X3R5cGUsIGludCBhbGxvY19tb2RlLAo+ICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnNpZ25lZCBsb25nIGxvbmcgYWdlKQo+
ICAgewo+ICAgICAgICAgc3RydWN0IGN1cnNlZ19pbmZvICpjdXJzZWcgPSBDVVJTRUdfSShzYmks
IHR5cGUpOwo+ICsgICAgICAgaW50IHJldDsKPgo+ICAgICAgICAgY3Vyc2VnLT5zZWdfdHlwZSA9
IHRhcmdldF90eXBlOwo+Cj4gQEAgLTI5MTAsMzggKzI5MTMsNDUgQEAgc3RhdGljIHZvaWQgZ2V0
X2F0c3NyX3NlZ21lbnQoc3RydWN0IGYyZnNfc2JfaW5mbyAqc2JpLCBpbnQgdHlwZSwKPiAgICAg
ICAgICAgICAgICAgc3RydWN0IHNlZ19lbnRyeSAqc2UgPSBnZXRfc2VnX2VudHJ5KHNiaSwgY3Vy
c2VnLT5uZXh0X3NlZ25vKTsKPgo+ICAgICAgICAgICAgICAgICBjdXJzZWctPnNlZ190eXBlID0g
c2UtPnR5cGU7Cj4gLSAgICAgICAgICAgICAgIGNoYW5nZV9jdXJzZWcoc2JpLCB0eXBlKTsKPiAr
ICAgICAgICAgICAgICAgcmV0ID0gY2hhbmdlX2N1cnNlZyhzYmksIHR5cGUpOwo+ICAgICAgICAg
fSBlbHNlIHsKPiAgICAgICAgICAgICAgICAgLyogYWxsb2NhdGUgY29sZCBzZWdtZW50IGJ5IGRl
ZmF1bHQgKi8KPiAgICAgICAgICAgICAgICAgY3Vyc2VnLT5zZWdfdHlwZSA9IENVUlNFR19DT0xE
X0RBVEE7Cj4gLSAgICAgICAgICAgICAgIG5ld19jdXJzZWcoc2JpLCB0eXBlLCB0cnVlKTsKPiAr
ICAgICAgICAgICAgICAgcmV0ID0gbmV3X2N1cnNlZyhzYmksIHR5cGUsIHRydWUpOwo+ICAgICAg
ICAgfQo+ICAgICAgICAgc3RhdF9pbmNfc2VnX3R5cGUoc2JpLCBjdXJzZWcpOwo+ICsKPiArICAg
ICAgIHJldHVybiByZXQ7Cj4gICB9Cj4KPiAtc3RhdGljIHZvaWQgX19mMmZzX2luaXRfYXRnY19j
dXJzZWcoc3RydWN0IGYyZnNfc2JfaW5mbyAqc2JpKQo+ICtzdGF0aWMgaW50IF9fZjJmc19pbml0
X2F0Z2NfY3Vyc2VnKHN0cnVjdCBmMmZzX3NiX2luZm8gKnNiaSkKPiAgIHsKPiAgICAgICAgIHN0
cnVjdCBjdXJzZWdfaW5mbyAqY3Vyc2VnID0gQ1VSU0VHX0koc2JpLCBDVVJTRUdfQUxMX0RBVEFf
QVRHQyk7Cj4gKyAgICAgICBpbnQgcmV0Owo+Cj4gICAgICAgICBpZiAoIXNiaS0+YW0uYXRnY19l
bmFibGVkKQo+IC0gICAgICAgICAgICAgICByZXR1cm47Cj4gKyAgICAgICAgICAgICAgIHJldHVy
biAwOwo+Cj4gICAgICAgICBmMmZzX2Rvd25fcmVhZCgmU01fSShzYmkpLT5jdXJzZWdfbG9jayk7
Cj4KPiAgICAgICAgIG11dGV4X2xvY2soJmN1cnNlZy0+Y3Vyc2VnX211dGV4KTsKPiAgICAgICAg
IGRvd25fd3JpdGUoJlNJVF9JKHNiaSktPnNlbnRyeV9sb2NrKTsKPgo+IC0gICAgICAgZ2V0X2F0
c3NyX3NlZ21lbnQoc2JpLCBDVVJTRUdfQUxMX0RBVEFfQVRHQywgQ1VSU0VHX0NPTERfREFUQSwg
U1NSLCAwKTsKPiArICAgICAgIHJldCA9IGdldF9hdHNzcl9zZWdtZW50KHNiaSwgQ1VSU0VHX0FM
TF9EQVRBX0FUR0MsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENV
UlNFR19DT0xEX0RBVEEsIFNTUiwgMCk7Cj4KPiAgICAgICAgIHVwX3dyaXRlKCZTSVRfSShzYmkp
LT5zZW50cnlfbG9jayk7Cj4gICAgICAgICBtdXRleF91bmxvY2soJmN1cnNlZy0+Y3Vyc2VnX211
dGV4KTsKPgo+ICAgICAgICAgZjJmc191cF9yZWFkKCZTTV9JKHNiaSktPmN1cnNlZ19sb2NrKTsK
Pgo+ICsgICAgICAgcmV0dXJuIHJldDsKPiArCj4gICB9Cj4gLXZvaWQgZjJmc19pbml0X2lubWVt
X2N1cnNlZyhzdHJ1Y3QgZjJmc19zYl9pbmZvICpzYmkpCj4gKwo+ICtpbnQgZjJmc19pbml0X2lu
bWVtX2N1cnNlZyhzdHJ1Y3QgZjJmc19zYl9pbmZvICpzYmkpCj4gICB7Cj4gLSAgICAgICBfX2Yy
ZnNfaW5pdF9hdGdjX2N1cnNlZyhzYmkpOwo+ICsgICAgICAgcmV0dXJuIF9fZjJmc19pbml0X2F0
Z2NfY3Vyc2VnKHNiaSk7Cj4gICB9Cj4KPiAgIHN0YXRpYyB2b2lkIF9fZjJmc19zYXZlX2lubWVt
X2N1cnNlZyhzdHJ1Y3QgZjJmc19zYl9pbmZvICpzYmksIGludCB0eXBlKQo+IEBAIC0zMDY5LDEx
ICszMDc5LDEyIEBAIHN0YXRpYyBib29sIG5lZWRfbmV3X3NlZyhzdHJ1Y3QgZjJmc19zYl9pbmZv
ICpzYmksIGludCB0eXBlKQo+ICAgICAgICAgcmV0dXJuIGZhbHNlOwo+ICAgfQo+Cj4gLXZvaWQg
ZjJmc19hbGxvY2F0ZV9zZWdtZW50X2Zvcl9yZXNpemUoc3RydWN0IGYyZnNfc2JfaW5mbyAqc2Jp
LCBpbnQgdHlwZSwKPiAraW50IGYyZnNfYWxsb2NhdGVfc2VnbWVudF9mb3JfcmVzaXplKHN0cnVj
dCBmMmZzX3NiX2luZm8gKnNiaSwgaW50IHR5cGUsCj4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBzdGFydCwgdW5zaWduZWQgaW50IGVuZCkKPiAg
IHsKPiAgICAgICAgIHN0cnVjdCBjdXJzZWdfaW5mbyAqY3Vyc2VnID0gQ1VSU0VHX0koc2JpLCB0
eXBlKTsKPiAgICAgICAgIHVuc2lnbmVkIGludCBzZWdubzsKPiArICAgICAgIGludCByZXQgPSAw
Owo+Cj4gICAgICAgICBmMmZzX2Rvd25fcmVhZCgmU01fSShzYmkpLT5jdXJzZWdfbG9jayk7Cj4g
ICAgICAgICBtdXRleF9sb2NrKCZjdXJzZWctPmN1cnNlZ19tdXRleCk7Cj4gQEAgLTMwODQsOSAr
MzA5NSw5IEBAIHZvaWQgZjJmc19hbGxvY2F0ZV9zZWdtZW50X2Zvcl9yZXNpemUoc3RydWN0IGYy
ZnNfc2JfaW5mbyAqc2JpLCBpbnQgdHlwZSwKPiAgICAgICAgICAgICAgICAgZ290byB1bmxvY2s7
Cj4KPiAgICAgICAgIGlmIChmMmZzX25lZWRfU1NSKHNiaSkgJiYgZ2V0X3Nzcl9zZWdtZW50KHNi
aSwgdHlwZSwgU1NSLCAwKSkKPiAtICAgICAgICAgICAgICAgY2hhbmdlX2N1cnNlZyhzYmksIHR5
cGUpOwo+ICsgICAgICAgICAgICAgICByZXQgPSBjaGFuZ2VfY3Vyc2VnKHNiaSwgdHlwZSk7Cj4g
ICAgICAgICBlbHNlCj4gLSAgICAgICAgICAgICAgIG5ld19jdXJzZWcoc2JpLCB0eXBlLCB0cnVl
KTsKPiArICAgICAgICAgICAgICAgcmV0ID0gbmV3X2N1cnNlZyhzYmksIHR5cGUsIHRydWUpOwo+
Cj4gICAgICAgICBzdGF0X2luY19zZWdfdHlwZShzYmksIGN1cnNlZyk7Cj4KPiBAQCAtMzEwMCw2
ICszMTExLDggQEAgdm9pZCBmMmZzX2FsbG9jYXRlX3NlZ21lbnRfZm9yX3Jlc2l6ZShzdHJ1Y3Qg
ZjJmc19zYl9pbmZvICpzYmksIGludCB0eXBlLAo+Cj4gICAgICAgICBtdXRleF91bmxvY2soJmN1
cnNlZy0+Y3Vyc2VnX211dGV4KTsKPiAgICAgICAgIGYyZnNfdXBfcmVhZCgmU01fSShzYmkpLT5j
dXJzZWdfbG9jayk7Cj4gKwo+ICsgICAgICAgcmV0dXJuIHJldDsKPiAgIH0KPgo+ICAgc3RhdGlj
IGludCBfX2FsbG9jYXRlX25ld19zZWdtZW50KHN0cnVjdCBmMmZzX3NiX2luZm8gKnNiaSwgaW50
IHR5cGUsCj4gQEAgLTMxMDcsNiArMzEyMCw3IEBAIHN0YXRpYyBpbnQgX19hbGxvY2F0ZV9uZXdf
c2VnbWVudChzdHJ1Y3QgZjJmc19zYl9pbmZvICpzYmksIGludCB0eXBlLAo+ICAgewo+ICAgICAg
ICAgc3RydWN0IGN1cnNlZ19pbmZvICpjdXJzZWcgPSBDVVJTRUdfSShzYmksIHR5cGUpOwo+ICAg
ICAgICAgdW5zaWduZWQgaW50IG9sZF9zZWdubzsKPiArICAgICAgIGludCByZXQ7Cj4KPiAgICAg
ICAgIGlmICh0eXBlID09IENVUlNFR19DT0xEX0RBVEFfUElOTkVEICYmICFjdXJzZWctPmluaXRl
ZCkKPiAgICAgICAgICAgICAgICAgZ290byBhbGxvY2F0ZTsKPiBAQCAtMzExOSw4ICszMTMzLDkg
QEAgc3RhdGljIGludCBfX2FsbG9jYXRlX25ld19zZWdtZW50KHN0cnVjdCBmMmZzX3NiX2luZm8g
KnNiaSwgaW50IHR5cGUsCj4KPiAgIGFsbG9jYXRlOgo+ICAgICAgICAgb2xkX3NlZ25vID0gY3Vy
c2VnLT5zZWdubzsKPiAtICAgICAgIGlmIChuZXdfY3Vyc2VnKHNiaSwgdHlwZSwgdHJ1ZSkpCj4g
LSAgICAgICAgICAgICAgIHJldHVybiAtRUFHQUlOOwo+ICsgICAgICAgcmV0ID0gbmV3X2N1cnNl
ZyhzYmksIHR5cGUsIHRydWUpOwo+ICsgICAgICAgaWYgKHJldCkKPiArICAgICAgICAgICAgICAg
cmV0dXJuIHJldDsKPiAgICAgICAgIHN0YXRfaW5jX3NlZ190eXBlKHNiaSwgY3Vyc2VnKTsKPiAg
ICAgICAgIGxvY2F0ZV9kaXJ0eV9zZWdtZW50KHNiaSwgb2xkX3NlZ25vKTsKPiAgICAgICAgIHJl
dHVybiAwOwo+IEBAIC0zNDgwLDE0ICszNDk1LDE3IEBAIGludCBmMmZzX2FsbG9jYXRlX2RhdGFf
YmxvY2soc3RydWN0IGYyZnNfc2JfaW5mbyAqc2JpLCBzdHJ1Y3QgcGFnZSAqcGFnZSwKPiAgICAg
ICAgIGJvb2wgZnJvbV9nYyA9ICh0eXBlID09IENVUlNFR19BTExfREFUQV9BVEdDKTsKPiAgICAg
ICAgIHN0cnVjdCBzZWdfZW50cnkgKnNlID0gTlVMTDsKPiAgICAgICAgIGJvb2wgc2VnbWVudF9m
dWxsID0gZmFsc2U7Cj4gKyAgICAgICBpbnQgcmV0ID0gMDsKPgo+ICAgICAgICAgZjJmc19kb3du
X3JlYWQoJlNNX0koc2JpKS0+Y3Vyc2VnX2xvY2spOwo+Cj4gICAgICAgICBtdXRleF9sb2NrKCZj
dXJzZWctPmN1cnNlZ19tdXRleCk7Cj4gICAgICAgICBkb3duX3dyaXRlKCZzaXRfaS0+c2VudHJ5
X2xvY2spOwo+Cj4gLSAgICAgICBpZiAoY3Vyc2VnLT5zZWdubyA9PSBOVUxMX1NFR05PKQo+ICsg
ICAgICAgaWYgKGN1cnNlZy0+c2Vnbm8gPT0gTlVMTF9TRUdOTykgewo+ICsgICAgICAgICAgICAg
ICByZXQgPSAtRU5PU1BDOwo+ICAgICAgICAgICAgICAgICBnb3RvIG91dF9lcnI7Cj4gKyAgICAg
ICB9Cj4KPiAgICAgICAgIGlmIChmcm9tX2djKSB7Cj4gICAgICAgICAgICAgICAgIGYyZnNfYnVn
X29uKHNiaSwgR0VUX1NFR05PKHNiaSwgb2xkX2Jsa2FkZHIpID09IE5VTExfU0VHTk8pOwo+IEBA
IC0zNTQxLDE3ICszNTU5LDE3IEBAIGludCBmMmZzX2FsbG9jYXRlX2RhdGFfYmxvY2soc3RydWN0
IGYyZnNfc2JfaW5mbyAqc2JpLCBzdHJ1Y3QgcGFnZSAqcGFnZSwKPiAgICAgICAgICAgICAgICAg
fQo+Cj4gICAgICAgICAgICAgICAgIGlmIChmcm9tX2djKSB7Cj4gLSAgICAgICAgICAgICAgICAg
ICAgICAgZ2V0X2F0c3NyX3NlZ21lbnQoc2JpLCB0eXBlLCBzZS0+dHlwZSwKPiArICAgICAgICAg
ICAgICAgICAgICAgICByZXQgPSBnZXRfYXRzc3Jfc2VnbWVudChzYmksIHR5cGUsIHNlLT50eXBl
LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFUX1NT
Uiwgc2UtPm10aW1lKTsKPiAgICAgICAgICAgICAgICAgfSBlbHNlIHsKPiAgICAgICAgICAgICAg
ICAgICAgICAgICBpZiAobmVlZF9uZXdfc2VnKHNiaSwgdHlwZSkpCj4gLSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBuZXdfY3Vyc2VnKHNiaSwgdHlwZSwgZmFsc2UpOwo+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gbmV3X2N1cnNlZyhzYmksIHR5cGUsIGZhbHNl
KTsKPiAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCj4gLSAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBjaGFuZ2VfY3Vyc2VnKHNiaSwgdHlwZSk7Cj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICByZXQgPSBjaGFuZ2VfY3Vyc2VnKHNiaSwgdHlwZSk7Cj4gICAgICAgICAg
ICAgICAgICAgICAgICAgc3RhdF9pbmNfc2VnX3R5cGUoc2JpLCBjdXJzZWcpOwo+ICAgICAgICAg
ICAgICAgICB9Cj4KPiAtICAgICAgICAgICAgICAgaWYgKGN1cnNlZy0+c2Vnbm8gPT0gTlVMTF9T
RUdOTykKPiArICAgICAgICAgICAgICAgaWYgKHJldCkKPiAgICAgICAgICAgICAgICAgICAgICAg
ICBnb3RvIG91dF9lcnI7Cj4gICAgICAgICB9Cj4KPiBAQCAtMzU5NCw3ICszNjEyLDcgQEAgaW50
IGYyZnNfYWxsb2NhdGVfZGF0YV9ibG9jayhzdHJ1Y3QgZjJmc19zYl9pbmZvICpzYmksIHN0cnVj
dCBwYWdlICpwYWdlLAo+ICAgICAgICAgdXBfd3JpdGUoJnNpdF9pLT5zZW50cnlfbG9jayk7Cj4g
ICAgICAgICBtdXRleF91bmxvY2soJmN1cnNlZy0+Y3Vyc2VnX211dGV4KTsKPiAgICAgICAgIGYy
ZnNfdXBfcmVhZCgmU01fSShzYmkpLT5jdXJzZWdfbG9jayk7Cj4gLSAgICAgICByZXR1cm4gLUVO
T1NQQzsKPiArICAgICAgIHJldHVybiByZXQ7Cj4KPiAgIH0KPgo+IEBAIC0zODI0LDcgKzM4NDIs
OCBAQCB2b2lkIGYyZnNfZG9fcmVwbGFjZV9ibG9jayhzdHJ1Y3QgZjJmc19zYl9pbmZvICpzYmks
IHN0cnVjdCBmMmZzX3N1bW1hcnkgKnN1bSwKPiAgICAgICAgIC8qIGNoYW5nZSB0aGUgY3VycmVu
dCBzZWdtZW50ICovCj4gICAgICAgICBpZiAoc2Vnbm8gIT0gY3Vyc2VnLT5zZWdubykgewo+ICAg
ICAgICAgICAgICAgICBjdXJzZWctPm5leHRfc2Vnbm8gPSBzZWdubzsKPiAtICAgICAgICAgICAg
ICAgY2hhbmdlX2N1cnNlZyhzYmksIHR5cGUpOwo+ICsgICAgICAgICAgICAgICBpZiAoY2hhbmdl
X2N1cnNlZyhzYmksIHR5cGUpKQo+ICsgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gb3V0X3Vu
bG9jazsKPiAgICAgICAgIH0KPgo+ICAgICAgICAgY3Vyc2VnLT5uZXh0X2Jsa29mZiA9IEdFVF9C
TEtPRkZfRlJPTV9TRUcwKHNiaSwgbmV3X2Jsa2FkZHIpOwo+IEBAIC0zODUwLDEyICszODY5LDE0
IEBAIHZvaWQgZjJmc19kb19yZXBsYWNlX2Jsb2NrKHN0cnVjdCBmMmZzX3NiX2luZm8gKnNiaSwg
c3RydWN0IGYyZnNfc3VtbWFyeSAqc3VtLAo+ICAgICAgICAgaWYgKHJlY292ZXJfY3Vyc2VnKSB7
Cj4gICAgICAgICAgICAgICAgIGlmIChvbGRfY3Vyc2Vnbm8gIT0gY3Vyc2VnLT5zZWdubykgewo+
ICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNlZy0+bmV4dF9zZWdubyA9IG9sZF9jdXJzZWdu
bzsKPiAtICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VfY3Vyc2VnKHNiaSwgdHlwZSk7Cj4g
KyAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nZV9jdXJzZWcoc2JpLCB0eXBlKSkKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvdG8gb3V0X3VubG9jazsKPiAgICAgICAg
ICAgICAgICAgfQo+ICAgICAgICAgICAgICAgICBjdXJzZWctPm5leHRfYmxrb2ZmID0gb2xkX2Js
a29mZjsKPiAgICAgICAgICAgICAgICAgY3Vyc2VnLT5hbGxvY190eXBlID0gb2xkX2FsbG9jX3R5
cGU7Cj4gICAgICAgICB9Cj4KPiArb3V0X3VubG9jazoKPiAgICAgICAgIHVwX3dyaXRlKCZzaXRf
aS0+c2VudHJ5X2xvY2spOwo+ICAgICAgICAgbXV0ZXhfdW5sb2NrKCZjdXJzZWctPmN1cnNlZ19t
dXRleCk7Cj4gICAgICAgICBmMmZzX3VwX3dyaXRlKCZTTV9JKHNiaSktPmN1cnNlZ19sb2NrKTsK
PiBkaWZmIC0tZ2l0IGEvZnMvZjJmcy9zdXBlci5jIGIvZnMvZjJmcy9zdXBlci5jCj4gaW5kZXgg
MDY3NmMyZGNiYmY3Li44YzY5MjU3ZGI4Y2MgMTAwNjQ0Cj4gLS0tIGEvZnMvZjJmcy9zdXBlci5j
Cj4gKysrIGIvZnMvZjJmcy9zdXBlci5jCj4gQEAgLTQ2OTEsNyArNDY5MSw5IEBAIHN0YXRpYyBp
bnQgZjJmc19maWxsX3N1cGVyKHN0cnVjdCBzdXBlcl9ibG9jayAqc2IsIHZvaWQgKmRhdGEsIGlu
dCBzaWxlbnQpCj4gICAgICAgICBpZiAoZXJyKQo+ICAgICAgICAgICAgICAgICBnb3RvIGZyZWVf
bWV0YTsKPgo+IC0gICAgICAgZjJmc19pbml0X2lubWVtX2N1cnNlZyhzYmkpOwo+ICsgICAgICAg
ZXJyID0gZjJmc19pbml0X2lubWVtX2N1cnNlZyhzYmkpOwo+ICsgICAgICAgaWYgKGVycikKPiAr
ICAgICAgICAgICAgICAgZ290byBzeW5jX2ZyZWVfbWV0YTsKPgo+ICAgICAgICAgLyogZjJmc19y
ZWNvdmVyX2ZzeW5jX2RhdGEoKSBjbGVhcmVkIHRoaXMgYWxyZWFkeSAqLwo+ICAgICAgICAgY2xl
YXJfc2JpX2ZsYWcoc2JpLCBTQklfUE9SX0RPSU5HKTsKPiAtLQo+IDIuNDAuMQo+Cj4KPgo+ID4K
PiA+IHRoYW5rcyEKPiA+Pgo+ID4+IFRoYW5rcywKPiA+Pgo+ID4+Pgo+ID4+PiBTaWduZWQtb2Zm
LWJ5OiBaaGlndW8gTml1IDx6aGlndW8ubml1QHVuaXNvYy5jb20+Cj4gPj4+IC0tLQo+ID4+PiAg
ICBmcy9mMmZzL2YyZnMuaCAgICB8IDIgKy0KPiA+Pj4gICAgZnMvZjJmcy9nYy5jICAgICAgfCA3
ICsrKysrLS0KPiA+Pj4gICAgZnMvZjJmcy9zZWdtZW50LmMgfCA5ICsrKysrKystLQo+ID4+PiAg
ICAzIGZpbGVzIGNoYW5nZWQsIDEzIGluc2VydGlvbnMoKyksIDUgZGVsZXRpb25zKC0pCj4gPj4+
Cj4gPj4+IGRpZmYgLS1naXQgYS9mcy9mMmZzL2YyZnMuaCBiL2ZzL2YyZnMvZjJmcy5oCj4gPj4+
IGluZGV4IDQzMzEwMTIuLjM5ZGRhN2QgMTAwNjQ0Cj4gPj4+IC0tLSBhL2ZzL2YyZnMvZjJmcy5o
Cj4gPj4+ICsrKyBiL2ZzL2YyZnMvZjJmcy5oCj4gPj4+IEBAIC0zNzAxLDcgKzM3MDEsNyBAQCB2
b2lkIGYyZnNfY2xlYXJfcHJlZnJlZV9zZWdtZW50cyhzdHJ1Y3QgZjJmc19zYl9pbmZvICpzYmks
Cj4gPj4+ICAgIHZvaWQgZjJmc19pbml0X2lubWVtX2N1cnNlZyhzdHJ1Y3QgZjJmc19zYl9pbmZv
ICpzYmkpOwo+ID4+PiAgICB2b2lkIGYyZnNfc2F2ZV9pbm1lbV9jdXJzZWcoc3RydWN0IGYyZnNf
c2JfaW5mbyAqc2JpKTsKPiA+Pj4gICAgdm9pZCBmMmZzX3Jlc3RvcmVfaW5tZW1fY3Vyc2VnKHN0
cnVjdCBmMmZzX3NiX2luZm8gKnNiaSk7Cj4gPj4+IC12b2lkIGYyZnNfYWxsb2NhdGVfc2VnbWVu
dF9mb3JfcmVzaXplKHN0cnVjdCBmMmZzX3NiX2luZm8gKnNiaSwgaW50IHR5cGUsCj4gPj4+ICtp
bnQgZjJmc19hbGxvY2F0ZV9zZWdtZW50X2Zvcl9yZXNpemUoc3RydWN0IGYyZnNfc2JfaW5mbyAq
c2JpLCBpbnQgdHlwZSwKPiA+Pj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgdW5zaWduZWQgaW50IHN0YXJ0LCB1bnNpZ25lZCBpbnQgZW5kKTsKPiA+Pj4gICAgaW50IGYy
ZnNfYWxsb2NhdGVfbmV3X3NlY3Rpb24oc3RydWN0IGYyZnNfc2JfaW5mbyAqc2JpLCBpbnQgdHlw
ZSwgYm9vbCBmb3JjZSk7Cj4gPj4+ICAgIGludCBmMmZzX2FsbG9jYXRlX3Bpbm5pbmdfc2VjdGlv
bihzdHJ1Y3QgZjJmc19zYl9pbmZvICpzYmkpOwo+ID4+PiBkaWZmIC0tZ2l0IGEvZnMvZjJmcy9n
Yy5jIGIvZnMvZjJmcy9nYy5jCj4gPj4+IGluZGV4IGM2MGI3NDcuLjdhNDU4ZmEgMTAwNjQ0Cj4g
Pj4+IC0tLSBhL2ZzL2YyZnMvZ2MuYwo+ID4+PiArKysgYi9mcy9mMmZzL2djLmMKPiA+Pj4gQEAg
LTIwMzcsOCArMjAzNywxMSBAQCBzdGF0aWMgaW50IGZyZWVfc2VnbWVudF9yYW5nZShzdHJ1Y3Qg
ZjJmc19zYl9pbmZvICpzYmksCj4gPj4+ICAgICAgICBtdXRleF91bmxvY2soJkRJUlRZX0koc2Jp
KS0+c2VnbGlzdF9sb2NrKTsKPiA+Pj4KPiA+Pj4gICAgICAgIC8qIE1vdmUgb3V0IGN1cnNlZ3Mg
ZnJvbSB0aGUgdGFyZ2V0IHJhbmdlICovCj4gPj4+IC0gICAgIGZvciAodHlwZSA9IENVUlNFR19I
T1RfREFUQTsgdHlwZSA8IE5SX0NVUlNFR19QRVJTSVNUX1RZUEU7IHR5cGUrKykKPiA+Pj4gLSAg
ICAgICAgICAgICBmMmZzX2FsbG9jYXRlX3NlZ21lbnRfZm9yX3Jlc2l6ZShzYmksIHR5cGUsIHN0
YXJ0LCBlbmQpOwo+ID4+PiArICAgICBmb3IgKHR5cGUgPSBDVVJTRUdfSE9UX0RBVEE7IHR5cGUg
PCBOUl9DVVJTRUdfUEVSU0lTVF9UWVBFOyB0eXBlKyspIHsKPiA+Pj4gKyAgICAgICAgICAgICBl
cnIgPSBmMmZzX2FsbG9jYXRlX3NlZ21lbnRfZm9yX3Jlc2l6ZShzYmksIHR5cGUsIHN0YXJ0LCBl
bmQpOwo+ID4+PiArICAgICAgICAgICAgIGlmIChlcnIpCj4gPj4+ICsgICAgICAgICAgICAgICAg
ICAgICBnb3RvIG91dDsKPiA+Pj4gKyAgICAgfQo+ID4+Pgo+ID4+PiAgICAgICAgLyogZG8gR0Mg
dG8gbW92ZSBvdXQgdmFsaWQgYmxvY2tzIGluIHRoZSByYW5nZSAqLwo+ID4+PiAgICAgICAgZXJy
ID0gZjJmc19nY19yYW5nZShzYmksIHN0YXJ0LCBlbmQsIGRyeV9ydW4sIDApOwo+ID4+PiBkaWZm
IC0tZ2l0IGEvZnMvZjJmcy9zZWdtZW50LmMgYi9mcy9mMmZzL3NlZ21lbnQuYwo+ID4+PiBpbmRl
eCAxYmIzMDE5Li4yYTA3YjlkIDEwMDY0NAo+ID4+PiAtLS0gYS9mcy9mMmZzL3NlZ21lbnQuYwo+
ID4+PiArKysgYi9mcy9mMmZzL3NlZ21lbnQuYwo+ID4+PiBAQCAtMzA3MSwxMSArMzA3MSwxMiBA
QCBzdGF0aWMgYm9vbCBuZWVkX25ld19zZWcoc3RydWN0IGYyZnNfc2JfaW5mbyAqc2JpLCBpbnQg
dHlwZSkKPiA+Pj4gICAgICAgIHJldHVybiBmYWxzZTsKPiA+Pj4gICAgfQo+ID4+Pgo+ID4+PiAt
dm9pZCBmMmZzX2FsbG9jYXRlX3NlZ21lbnRfZm9yX3Jlc2l6ZShzdHJ1Y3QgZjJmc19zYl9pbmZv
ICpzYmksIGludCB0eXBlLAo+ID4+PiAraW50IGYyZnNfYWxsb2NhdGVfc2VnbWVudF9mb3JfcmVz
aXplKHN0cnVjdCBmMmZzX3NiX2luZm8gKnNiaSwgaW50IHR5cGUsCj4gPj4+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2lnbmVkIGludCBzdGFydCwgdW5zaWduZWQg
aW50IGVuZCkKPiA+Pj4gICAgewo+ID4+PiAgICAgICAgc3RydWN0IGN1cnNlZ19pbmZvICpjdXJz
ZWcgPSBDVVJTRUdfSShzYmksIHR5cGUpOwo+ID4+PiAgICAgICAgdW5zaWduZWQgaW50IHNlZ25v
Owo+ID4+PiArICAgICBpbnQgZXJyID0gMDsKPiA+Pj4KPiA+Pj4gICAgICAgIGYyZnNfZG93bl9y
ZWFkKCZTTV9JKHNiaSktPmN1cnNlZ19sb2NrKTsKPiA+Pj4gICAgICAgIG11dGV4X2xvY2soJmN1
cnNlZy0+Y3Vyc2VnX211dGV4KTsKPiA+Pj4gQEAgLTMwODksNyArMzA5MCwxMCBAQCB2b2lkIGYy
ZnNfYWxsb2NhdGVfc2VnbWVudF9mb3JfcmVzaXplKHN0cnVjdCBmMmZzX3NiX2luZm8gKnNiaSwg
aW50IHR5cGUsCj4gPj4+ICAgICAgICAgICAgICAgIGNoYW5nZV9jdXJzZWcoc2JpLCB0eXBlKTsK
PiA+Pj4gICAgICAgIGVsc2UKPiA+Pj4gICAgICAgICAgICAgICAgbmV3X2N1cnNlZyhzYmksIHR5
cGUsIHRydWUpOwo+ID4+PiAtCj4gPj4+ICsgICAgIGlmIChjdXJzZWctPnNlZ25vID09IE5VTExf
U0VHTk8pIHsKPiA+Pj4gKyAgICAgICAgICAgICBlcnIgPSAtRU5PU1BDOwo+ID4+PiArICAgICAg
ICAgICAgIGdvdG8gdW5sb2NrOwo+ID4+PiArICAgICB9Cj4gPj4+ICAgICAgICBzdGF0X2luY19z
ZWdfdHlwZShzYmksIGN1cnNlZyk7Cj4gPj4+Cj4gPj4+ICAgICAgICBsb2NhdGVfZGlydHlfc2Vn
bWVudChzYmksIHNlZ25vKTsKPiA+Pj4gQEAgLTMxMDIsNiArMzEwNiw3IEBAIHZvaWQgZjJmc19h
bGxvY2F0ZV9zZWdtZW50X2Zvcl9yZXNpemUoc3RydWN0IGYyZnNfc2JfaW5mbyAqc2JpLCBpbnQg
dHlwZSwKPiA+Pj4KPiA+Pj4gICAgICAgIG11dGV4X3VubG9jaygmY3Vyc2VnLT5jdXJzZWdfbXV0
ZXgpOwo+ID4+PiAgICAgICAgZjJmc191cF9yZWFkKCZTTV9JKHNiaSktPmN1cnNlZ19sb2NrKTsK
PiA+Pj4gKyAgICAgcmV0dXJuIGVycjsKPiA+Pj4gICAgfQo+ID4+Pgo+ID4+PiAgICBzdGF0aWMg
aW50IF9fYWxsb2NhdGVfbmV3X3NlZ21lbnQoc3RydWN0IGYyZnNfc2JfaW5mbyAqc2JpLCBpbnQg
dHlwZSwKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpM
aW51eC1mMmZzLWRldmVsIG1haWxpbmcgbGlzdApMaW51eC1mMmZzLWRldmVsQGxpc3RzLnNvdXJj
ZWZvcmdlLm5ldApodHRwczovL2xpc3RzLnNvdXJjZWZvcmdlLm5ldC9saXN0cy9saXN0aW5mby9s
aW51eC1mMmZzLWRldmVsCg==
