Return-Path: <linux-f2fs-devel-bounces@lists.sourceforge.net>
X-Original-To: lists+linux-f2fs-devel@lfdr.de
Delivered-To: lists+linux-f2fs-devel@lfdr.de
Received: from lists.sourceforge.net (lists.sourceforge.net [216.105.38.7])
	by mail.lfdr.de (Postfix) with ESMTPS id 4773E97D855
	for <lists+linux-f2fs-devel@lfdr.de>; Fri, 20 Sep 2024 18:28:50 +0200 (CEST)
Received: from [127.0.0.1] (helo=sfs-ml-1.v29.lw.sourceforge.com)
	by sfs-ml-1.v29.lw.sourceforge.com with esmtp (Exim 4.95)
	(envelope-from <linux-f2fs-devel-bounces@lists.sourceforge.net>)
	id 1srgUo-0005du-KV;
	Fri, 20 Sep 2024 16:28:39 +0000
Received: from [172.30.29.66] (helo=mx.sourceforge.net)
 by sfs-ml-1.v29.lw.sourceforge.com with esmtps (TLS1.2) tls
 TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 (Exim 4.95)
 (envelope-from <daeho43@gmail.com>) id 1srgUn-0005do-TF
 for linux-f2fs-devel@lists.sourceforge.net;
 Fri, 20 Sep 2024 16:28:38 +0000
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
 d=sourceforge.net; s=x; h=Content-Transfer-Encoding:Content-Type:Cc:To:
 Subject:Message-ID:Date:From:In-Reply-To:References:MIME-Version:Sender:
 Reply-To:Content-ID:Content-Description:Resent-Date:Resent-From:Resent-Sender
 :Resent-To:Resent-Cc:Resent-Message-ID:List-Id:List-Help:List-Unsubscribe:
 List-Subscribe:List-Post:List-Owner:List-Archive;
 bh=n9BzvPXvDK7vGQCDBHREu891AQPrfov5jmnER+4W/N0=; b=cQ2jvXgGp2R75OK7a9SfFSOYPb
 rkdAVXXNtC/nyNeh7MiR3WLSwh7f4LzgfJWM3sqfkJcYyuPD6P5XNddc+U8isIqcjHS2nkNATnCLP
 zVpKvjivamiGjbJWHnrY/8Sy94MY7GKuot9sAl+H5ude0vSUwbYd7WTMowp6QaUPXlRo=;
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=sf.net; s=x
 ;
 h=Content-Transfer-Encoding:Content-Type:Cc:To:Subject:Message-ID:Date:From
 :In-Reply-To:References:MIME-Version:Sender:Reply-To:Content-ID:
 Content-Description:Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc
 :Resent-Message-ID:List-Id:List-Help:List-Unsubscribe:List-Subscribe:
 List-Post:List-Owner:List-Archive;
 bh=n9BzvPXvDK7vGQCDBHREu891AQPrfov5jmnER+4W/N0=; b=FjD+F8+RzEhqD22kix+mIi/88L
 uw3zopQoHA1bThG7jLBOaK7zgfoBmIzKTz5xDyPqMceGzc3M9JDeTfvqlwSb9b2vNoHWAxxw9j9wl
 4/6vIu/zp04TJIfViDJXd/dSCJXp9jDuSY+EHmU86YvkksaKnrN37f+TV6KsA04JiBgc=;
Received: from mail-vk1-f170.google.com ([209.85.221.170])
 by sfi-mx-2.v28.lw.sourceforge.com with esmtps
 (TLS1.2:ECDHE-RSA-AES128-GCM-SHA256:128) (Exim 4.95)
 id 1srgUm-0004gN-Oa for linux-f2fs-devel@lists.sourceforge.net;
 Fri, 20 Sep 2024 16:28:38 +0000
Received: by mail-vk1-f170.google.com with SMTP id
 71dfb90a1353d-502c8f50c5dso639660e0c.0
 for <linux-f2fs-devel@lists.sourceforge.net>;
 Fri, 20 Sep 2024 09:28:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20230601; t=1726849706; x=1727454506; darn=lists.sourceforge.net;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:from:to:cc:subject:date
 :message-id:reply-to;
 bh=n9BzvPXvDK7vGQCDBHREu891AQPrfov5jmnER+4W/N0=;
 b=GWjT3d9UzNhH5I13e+Glp2+RiOA/AbfEuK5lKfl+jXmfQ/jecRU5p7bKOZ8u/x3BVW
 LxW++kooQcKJzpetPN/gZxiPswvw/6aTrqWzHC8TWDY/fMnaX7v9Pn+Pm9a7aEP4gLoR
 Dw0hwxgshRDnznyEotpsPnACYF2K4log40MhItfMn744cFXtifHDcZY6lJ/7wpzlcyU7
 eVJ2onvai1Lt0dGM7/TNUGOf3Rv98CTwrjtXQj3CAB0GqbZuNEaiEHR0H/DWlgYigJYf
 o4O/6FHGcsS9p4f7USvnMWW8GMxmASg6gcQT3FEKC8DtBSVuBq4n1MIy+L+Ltp0KjkLh
 qiRg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20230601; t=1726849706; x=1727454506;
 h=content-transfer-encoding:cc:to:subject:message-id:date:from
 :in-reply-to:references:mime-version:x-gm-message-state:from:to:cc
 :subject:date:message-id:reply-to;
 bh=n9BzvPXvDK7vGQCDBHREu891AQPrfov5jmnER+4W/N0=;
 b=R1JlZtXPZUst27vIGrwUbHLEjZsOeMKcTUhtcRHVy+s+Kc8gOX+jO+7OUVZE+W1GTq
 byFpm7Y9S3bkc1LF8A3UeZ3e2O16Fa1B+NvlXn6He9xV3CDc7SYfl01Dsp/HH/HBjW/x
 M3UOluRE1dNNb7y5iUggSEPS4treSGP1gTkrLxQSeyH9L94JqBzQlNozdIgUWJRoNZVZ
 AowOPdPOGTX4MyX++N5wbEyZDUD/tV9QmE08004uD1VkC8TaULxTnaecVKWyVh1PGb6F
 Eo16KXg/EegyGaAlUx1WDQ447SVbW8Fsjh0FYj1EXLo8IxY5FQb0gToImsx6ubkVXK0P
 5alw==
X-Forwarded-Encrypted: i=1;
 AJvYcCX+JylAvIRWijsYirV+b5Tfu+umfo9JDSsn+0lSNpzQuyIxlLHK4jdCDkft+3Fa13IcigQG6ZEEzHDMmOJtxjIH@lists.sourceforge.net
X-Gm-Message-State: AOJu0YweaFT9+rig34xGYg3juGuJShUbayzSyqIA9ljdJFGMVcer4+Jx
 Lv/iFeB4SfP/ftSMi7h7qJEQ/PuYELr9OQlGZ18/9gxInVyZKzksnWZcfpxGTuKEjUE1d2S7yw1
 oq7iDYOBsaYfYMwVebmZVa9ukyUE=
X-Google-Smtp-Source: AGHT+IHOe0/2nPB7olw/VFlEQXVlxO92E6VMmKqpia2OnqU6EmidNOf0tmuju/U8vIIc11LFtJMT7YWuCM6fIGOC3hU=
X-Received: by 2002:a05:6122:d8e:b0:4fc:edb4:3386 with SMTP id
 71dfb90a1353d-503e40d23b3mr2157736e0c.6.1726849705505; Fri, 20 Sep 2024
 09:28:25 -0700 (PDT)
MIME-Version: 1.0
References: <20240916192014.1611002-1-daeho43@gmail.com>
 <20240916192014.1611002-2-daeho43@gmail.com>
 <ZutmsVJuM3Dl0wee@google.com>
In-Reply-To: <ZutmsVJuM3Dl0wee@google.com>
From: Daeho Jeong <daeho43@gmail.com>
Date: Fri, 20 Sep 2024 09:28:14 -0700
Message-ID: <CACOAw_wZ-ORvL8d8NZEP5RZ4pKnAoG8K5H=WscB-D2HODRRW0w@mail.gmail.com>
To: Jaegeuk Kim <jaegeuk@kernel.org>
X-Spam-Score: -1.0 (-)
X-Spam-Report: Spam detection software, running on the system "util-spamd-2.v13.lw.sourceforge.com",
 has NOT identified this incoming email as spam.  The original
 message has been attached to this so you can view it or label
 similar future email.  If you have any questions, see
 the administrator of that system for details.
 
 Content preview:  On Wed, Sep 18, 2024 at 4:48 PM Jaegeuk Kim wrote: > > In
    file included from f2fs_format.c:14: > f2fs_format.c: In function ‘allocate_blocks_for_aliased_device’:
    > f2fs_format.c:1705:24: error [...] 
 
 Content analysis details:   (-1.0 points, 6.0 required)
 
  pts rule name              description
 ---- ---------------------- --------------------------------------------------
  0.2 FREEMAIL_ENVFROM_END_DIGIT Envelope-from freemail username ends
                             in digit
                             [daeho43[at]gmail.com]
 -0.0 SPF_PASS               SPF: sender matches SPF record
  0.0 FREEMAIL_FROM          Sender email is commonly abused enduser mail
                             provider
                             [daeho43[at]gmail.com]
  0.0 SPF_HELO_NONE          SPF: HELO does not publish an SPF Record
 -0.0 RCVD_IN_DNSWL_NONE     RBL: Sender listed at https://www.dnswl.org/,
                              no trust
                             [209.85.221.170 listed in list.dnswl.org]
 -1.0 RCVD_IN_MSPIKE_H2      RBL: Average reputation (+2)
                             [209.85.221.170 listed in wl.mailspike.net]
 -0.1 DKIM_VALID_EF          Message has a valid DKIM or DK signature from
                             envelope-from domain
  0.1 DKIM_SIGNED            Message has a DKIM or DK signature, not necessarily
                             valid
 -0.1 DKIM_VALID_AU          Message has a valid DKIM or DK signature from
                             author's domain
 -0.1 DKIM_VALID             Message has at least one valid DKIM or DK signature
X-Headers-End: 1srgUm-0004gN-Oa
Subject: Re: [f2fs-dev] [PATCH v2 2/2] mkfs.f2fs: add device aliasing feature
X-BeenThere: linux-f2fs-devel@lists.sourceforge.net
X-Mailman-Version: 2.1.21
Precedence: list
List-Id: <linux-f2fs-devel.lists.sourceforge.net>
List-Unsubscribe: <https://lists.sourceforge.net/lists/options/linux-f2fs-devel>, 
 <mailto:linux-f2fs-devel-request@lists.sourceforge.net?subject=unsubscribe>
List-Archive: <http://sourceforge.net/mailarchive/forum.php?forum_name=linux-f2fs-devel>
List-Post: <mailto:linux-f2fs-devel@lists.sourceforge.net>
List-Help: <mailto:linux-f2fs-devel-request@lists.sourceforge.net?subject=help>
List-Subscribe: <https://lists.sourceforge.net/lists/listinfo/linux-f2fs-devel>, 
 <mailto:linux-f2fs-devel-request@lists.sourceforge.net?subject=subscribe>
Cc: Daeho Jeong <daehojeong@google.com>, kernel-team@android.com,
 linux-kernel@vger.kernel.org, linux-f2fs-devel@lists.sourceforge.net
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: linux-f2fs-devel-bounces@lists.sourceforge.net

T24gV2VkLCBTZXAgMTgsIDIwMjQgYXQgNDo0OOKAr1BNIEphZWdldWsgS2ltIDxqYWVnZXVrQGtl
cm5lbC5vcmc+IHdyb3RlOgo+Cj4gSW4gZmlsZSBpbmNsdWRlZCBmcm9tIGYyZnNfZm9ybWF0LmM6
MTQ6Cj4gZjJmc19mb3JtYXQuYzogSW4gZnVuY3Rpb24g4oCYYWxsb2NhdGVfYmxvY2tzX2Zvcl9h
bGlhc2VkX2RldmljZeKAmToKPiBmMmZzX2Zvcm1hdC5jOjE3MDU6MjQ6IGVycm9yOiB0b28gZmV3
IGFyZ3VtZW50cyB0byBmdW5jdGlvbiDigJhkZXZfd3JpdGVfYmxvY2vigJkKPiAgMTcwNSB8ICAg
ICAgICAgICAgICAgICBBU1NFUlQoZGV2X3dyaXRlX2Jsb2NrKHNpdF9ibGssIHNpdF9ibGtfYWRk
cikgPj0gMCk7Cj4gICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgIF5+fn5+fn5+fn5+fn5+
fgo+IC4uL2luY2x1ZGUvZjJmc19mcy5oOjI3NToyMzogbm90ZTogaW4gZGVmaW5pdGlvbiBvZiBt
YWNybyDigJhBU1NFUlTigJkKPiAgIDI3NSB8ICAgICAgICAgICAgICAgICBpZiAoIShleHApKSB7
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKPiAgICAgICB8ICAg
ICAgICAgICAgICAgICAgICAgICBefn4KPiAuLi9pbmNsdWRlL2YyZnNfZnMuaDoxNjUxOjEyOiBu
b3RlOiBkZWNsYXJlZCBoZXJlCj4gIDE2NTEgfCBleHRlcm4gaW50IGRldl93cml0ZV9ibG9jayh2
b2lkICosIF9fdTY0LCBlbnVtIHJ3X2hpbnQpOwo+ICAgICAgIHwgICAgICAgICAgICBefn5+fn5+
fn5+fn5+fn4KPiBmMmZzX2Zvcm1hdC5jOiBJbiBmdW5jdGlvbiDigJhmMmZzX3dyaXRlX2FsaWFz
X2lub2Rlc+KAmToKPiBmMmZzX2Zvcm1hdC5jOjE3NjI6MjE6IGVycm9yOiB0b28gZmV3IGFyZ3Vt
ZW50cyB0byBmdW5jdGlvbiDigJh3cml0ZV9pbm9kZeKAmQo+ICAxNzYyIHwgICAgICAgICAgICAg
ICAgIGlmICh3cml0ZV9pbm9kZShyYXdfbm9kZSwgbm9kZV9ibGthZGRyKSA8IDApIHsKPiAgICAg
ICB8ICAgICAgICAgICAgICAgICAgICAgXn5+fn5+fn5+fn4KPiAuLi9pbmNsdWRlL2YyZnNfZnMu
aDoxNjEyOjEyOiBub3RlOiBkZWNsYXJlZCBoZXJlCj4gIDE2MTIgfCBleHRlcm4gaW50IHdyaXRl
X2lub2RlKHN0cnVjdCBmMmZzX25vZGUgKiwgdTY0LCBlbnVtIHJ3X2hpbnQpOwo+ICAgICAgIHwg
ICAgICAgICAgICBefn5+fn5+fn5+fgoKSSBtaXNzZWQgdGhlIHdoaW50IHBhdGNoLiBXaWxsIGZp
eCBpdC4KCj4KPiBPbiAwOS8xNiwgRGFlaG8gSmVvbmcgd3JvdGU6Cj4gPiBGcm9tOiBEYWVobyBK
ZW9uZyA8ZGFlaG9qZW9uZ0Bnb29nbGUuY29tPgo+ID4KPiA+IFdlIGNhbiBhZGQgYSBkZXZpY2Ug
YWxpYXNpbmcgZmlsZSB3aGljaCBjYW4gbWFwIHRoZSB3aG9sZSBkZXZpY2Ugd2l0aCBhbgo+ID4g
ZXh0ZW50LCBub3QgdXNpbmcgbm9kZSBibG9ja3MuIFRoaXMgbWFwcGVkIGFyZWEgc2hvdWxkIGJl
IHBpbm5lZCBhbmQKPiA+IG5vcm1hbGx5IHVzZWQgZm9yIHJlYWQtb25seSB1c2FnZXMuIEFmdGVy
IGZpbmlzaGVkIHVzaW5nIGl0LCB3ZSBjYW4KPiA+IGRlYWxsb2NhdGUgdGhlIHdob2xlIGFyZWEg
YW5kIHJldHVybiBpdCBiYWNrIHRvIHVzZSBpdCBmb3Igb3RoZXIgZmlsZXMuCj4gPgo+ID4gU2ln
bmVkLW9mZi1ieTogRGFlaG8gSmVvbmcgPGRhZWhvamVvbmdAZ29vZ2xlLmNvbT4KPiA+IC0tLQo+
ID4gdjI6IHJlbW92ZWQgdW5uZWNlc3NhcnkgZGVmaW5lIGFuZCByZW5hbWVkIElTX0FMSUFTSU5H
KCkKPiA+IC0tLQo+ID4gIGZzY2svZHVtcC5jICAgICAgICAgICAgIHwgIDEzICsrCj4gPiAgZnNj
ay9mc2NrLmMgICAgICAgICAgICAgfCAgNDkgKysrKy0tCj4gPiAgZnNjay9mc2NrLmggICAgICAg
ICAgICAgfCAgIDQgKy0KPiA+ICBmc2NrL21haW4uYyAgICAgICAgICAgICB8ICAgNSArCj4gPiAg
aW5jbHVkZS9mMmZzX2ZzLmggICAgICAgfCAgIDcgKwo+ID4gIG1rZnMvZjJmc19mb3JtYXQuYyAg
ICAgIHwgMzM1ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0KPiA+ICBt
a2ZzL2YyZnNfZm9ybWF0X21haW4uYyB8ICAzMCArKystCj4gPiAgNyBmaWxlcyBjaGFuZ2VkLCAz
NTkgaW5zZXJ0aW9ucygrKSwgODQgZGVsZXRpb25zKC0pCj4gPgo+ID4gZGlmZiAtLWdpdCBhL2Zz
Y2svZHVtcC5jIGIvZnNjay9kdW1wLmMKPiA+IGluZGV4IDQ0OGMwZWYuLmJkNGM3YmQgMTAwNjQ0
Cj4gPiAtLS0gYS9mc2NrL2R1bXAuYwo+ID4gKysrIGIvZnNjay9kdW1wLmMKPiA+IEBAIC01Mjcs
NiArNTI3LDE5IEBAIHN0YXRpYyBpbnQgZHVtcF9pbm9kZV9ibGsoc3RydWN0IGYyZnNfc2JfaW5m
byAqc2JpLCB1MzIgbmlkLAo+ID4gICAgICAgfQo+ID4KPiA+ICAgICAgIGMuc2hvd19maWxlX21h
cF9tYXhfb2Zmc2V0ID0gZjJmc19tYXhfZmlsZV9vZmZzZXQoJm5vZGVfYmxrLT5pKTsKPiA+ICsK
PiA+ICsgICAgIGlmIChJU19ERVZJQ0VfQUxJQVNJTkcoJm5vZGVfYmxrLT5pKSkgewo+ID4gKyAg
ICAgICAgICAgICB1MzIgYmxrYWRkciA9IGxlMzJfdG9fY3B1KG5vZGVfYmxrLT5pLmlfZXh0LmJs
a19hZGRyKTsKPiA+ICsgICAgICAgICAgICAgdTMyIGxlbiA9IGxlMzJfdG9fY3B1KG5vZGVfYmxr
LT5pLmlfZXh0Lmxlbik7Cj4gPiArICAgICAgICAgICAgIHUzMiBpZHg7Cj4gPiArCj4gPiArICAg
ICAgICAgICAgIGZvciAoaWR4ID0gMDsgaWR4IDwgbGVuOyBpZHgrKykKPiA+ICsgICAgICAgICAg
ICAgICAgICAgICBkdW1wX2RhdGFfYmxrKHNiaSwgaWR4ICogRjJGU19CTEtTSVpFLCBibGthZGRy
KyssIGZhbHNlKTsKPiA+ICsgICAgICAgICAgICAgcHJpbnRfZXh0ZW50KHRydWUpOwo+ID4gKwo+
ID4gKyAgICAgICAgICAgICBnb3RvIGR1bXBfeGF0dHI7Cj4gPiArICAgICB9Cj4gPiArCj4gPiAg
ICAgICBhZGRyX3Blcl9ibG9jayA9IEFERFJTX1BFUl9CTE9DSygmbm9kZV9ibGstPmkpOwo+ID4K
PiA+ICAgICAgIC8qIGNoZWNrIGRhdGEgYmxvY2tzIGluIGlub2RlICovCj4gPiBkaWZmIC0tZ2l0
IGEvZnNjay9mc2NrLmMgYi9mc2NrL2ZzY2suYwo+ID4gaW5kZXggYTE4YmVlOS4uYzliMGYzNiAx
MDA2NDQKPiA+IC0tLSBhL2ZzY2svZnNjay5jCj4gPiArKysgYi9mc2NrL2ZzY2suYwo+ID4gQEAg
LTkwMiw2ICs5MDIsNyBAQCB2b2lkIGZzY2tfY2hrX2lub2RlX2JsayhzdHJ1Y3QgZjJmc19zYl9p
bmZvICpzYmksIHUzMiBuaWQsCj4gPiAgICAgICBpbnQgbmVlZF9maXggPSAwOwo+ID4gICAgICAg
aW50IHJldDsKPiA+ICAgICAgIHUzMiBjbHVzdGVyX3NpemUgPSAxIDw8IG5vZGVfYmxrLT5pLmlf
bG9nX2NsdXN0ZXJfc2l6ZTsKPiA+ICsgICAgIGJvb2wgaXNfYWxpYXNpbmcgPSBJU19ERVZJQ0Vf
QUxJQVNJTkcoJm5vZGVfYmxrLT5pKTsKPiA+Cj4gPiAgICAgICBpZiAoIWNvbXByZXNzZWQpCj4g
PiAgICAgICAgICAgICAgIGdvdG8gY2hlY2tfbmV4dDsKPiA+IEBAIC0xMTMyLDYgKzExMzMsMzMg
QEAgY2hlY2tfbmV4dDoKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJzX3Bl
cl9ibGsgKiBOSURTX1BFUl9CTE9DSyAqCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBOSURTX1BFUl9CTE9DSykgKiBGMkZTX0JMS1NJWkU7Cj4gPiAgICAgICB9Cj4gPiArCj4gPiAr
ICAgICBpZiAoaXNfYWxpYXNpbmcpIHsKPiA+ICsgICAgICAgICAgICAgc3RydWN0IGV4dGVudF9p
bmZvIGVpOwo+ID4gKwo+ID4gKyAgICAgICAgICAgICBnZXRfZXh0ZW50X2luZm8oJmVpLCAmbm9k
ZV9ibGstPmkuaV9leHQpOwo+ID4gKyAgICAgICAgICAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGVp
LmxlbjsgaWR4KyssIGNoaWxkLnBnb2ZzKyspIHsKPiA+ICsgICAgICAgICAgICAgICAgICAgICBi
bG9ja190IGJsa2FkZHIgPSBlaS5ibGsgKyBpZHg7Cj4gPiArCj4gPiArICAgICAgICAgICAgICAg
ICAgICAgLyogY2hlY2sgZXh0ZW50IGluZm8gKi8KPiA+ICsgICAgICAgICAgICAgICAgICAgICBj
aGVja19leHRlbnRfaW5mbygmY2hpbGQsIGJsa2FkZHIsIDApOwo+ID4gKyAgICAgICAgICAgICAg
ICAgICAgIHJldCA9IGZzY2tfY2hrX2RhdGFfYmxrKHNiaSwgJm5vZGVfYmxrLT5pLCBibGthZGRy
LAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJmNoaWxkLCAoaV9ibG9ja3MgPT0g
KmJsa19jbnQpLCBmdHlwZSwgbmlkLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
aWR4LCBuaS0+dmVyc2lvbiwgbm9kZV9ibGspOwo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGlm
ICghcmV0KSB7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqYmxrX2NudCA9ICpi
bGtfY250ICsgMTsKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJfcXR5
cGUgIT0gLTEpCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHFmX2xh
c3RfYmxrb2ZzW2N1cl9xdHlwZV0gPSBjaGlsZC5wZ29mczsKPiA+ICsgICAgICAgICAgICAgICAg
ICAgICB9IGVsc2UgaWYgKGMuZml4X29uKSB7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBub2RlX2Jsay0+aS5pX2V4dC5sZW4gPSBjcHVfdG9fbGUzMihpZHgpOwo+ID4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgbmVlZF9maXggPSAxOwo+ID4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgYnJlYWs7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgfQo+ID4gKyAg
ICAgICAgICAgICB9Cj4gPiArCj4gPiArICAgICAgICAgICAgIGdvdG8gY2hlY2s7Cj4gPiArICAg
ICB9Cj4gPiArCj4gPiAgICAgICBmb3IgKGlkeCA9IDA7IGlkeCA8IGFkZHJzOyBpZHgrKywgY2hp
bGQucGdvZnMrKykgewo+ID4gICAgICAgICAgICAgICBibG9ja190IGJsa2FkZHIgPSBsZTMyX3Rv
X2NwdShub2RlX2Jsay0+aS5pX2FkZHJbb2ZzICsgaWR4XSk7Cj4gPgo+ID4gQEAgLTExNjQsMTEg
KzExOTIsMTEgQEAgY2hlY2tfbmV4dDoKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGNoaWxkLnBnb2ZzIC0gY2JjLT5jaGVhZGVyX3Bnb2ZzIDwgY2x1c3Rlcl9zaXplKQo+ID4gICAg
ICAgICAgICAgICAgICAgICAgIGNiYy0+Y250Kys7Cj4gPiAgICAgICAgICAgICAgIHJldCA9IGZz
Y2tfY2hrX2RhdGFfYmxrKHNiaSwKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgIElT
X0NBU0VGT0xERUQoJm5vZGVfYmxrLT5pKSwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICZub2RlX2Jsay0+aSwKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsa2Fk
ZHIsCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmY2hpbGQsIChpX2Jsb2NrcyA9
PSAqYmxrX2NudCksCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdHlwZSwgbmlk
LCBpZHgsIG5pLT52ZXJzaW9uLAo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmls
ZV9pc19lbmNyeXB0KCZub2RlX2Jsay0+aSksIG5vZGVfYmxrKTsKPiA+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIG5vZGVfYmxrKTsKPiA+ICAgICAgICAgICAgICAgaWYgKGJsa2FkZHIg
IT0gbGUzMl90b19jcHUobm9kZV9ibGstPmkuaV9hZGRyW29mcyArIGlkeF0pKQo+ID4gICAgICAg
ICAgICAgICAgICAgICAgIG5lZWRfZml4ID0gMTsKPiA+ICAgICAgICAgICAgICAgaWYgKCFyZXQp
IHsKPiA+IEBAIC0xMzYyLDcgKzEzOTAsNyBAQCBza2lwX2Jsa2NudF9maXg6Cj4gPiAgICAgICB9
Cj4gPgo+ID4gICAgICAgLyogZHJvcCBleHRlbnQgaW5mb3JtYXRpb24gdG8gYXZvaWQgcG90ZW50
aWFsIHdyb25nIGFjY2VzcyAqLwo+ID4gLSAgICAgaWYgKG5lZWRfZml4ICYmIGYyZnNfZGV2X2lz
X3dyaXRhYmxlKCkpCj4gPiArICAgICBpZiAobmVlZF9maXggJiYgZjJmc19kZXZfaXNfd3JpdGFi
bGUoKSAmJiAhaXNfYWxpYXNpbmcpCj4gPiAgICAgICAgICAgICAgIG5vZGVfYmxrLT5pLmlfZXh0
LmxlbiA9IDA7Cj4gPgo+ID4gICAgICAgaWYgKChjLmZlYXR1cmUgJiBGMkZTX0ZFQVRVUkVfSU5P
REVfQ0hLU1VNKSAmJgo+ID4gQEAgLTE0MzYsMTEgKzE0NjQsOSBAQCBpbnQgZnNja19jaGtfZG5v
ZGVfYmxrKHN0cnVjdCBmMmZzX3NiX2luZm8gKnNiaSwgc3RydWN0IGYyZnNfaW5vZGUgKmlub2Rl
LAo+ID4gICAgICAgICAgICAgICBpZiAoIWNvbXByX3JlbCAmJiBibGthZGRyID09IE5FV19BRERS
ICYmIGNoaWxkLT5wZ29mcyAtCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYmMt
PmNoZWFkZXJfcGdvZnMgPCBjbHVzdGVyX3NpemUpCj4gPiAgICAgICAgICAgICAgICAgICAgICAg
Y2JjLT5jbnQrKzsKPiA+IC0gICAgICAgICAgICAgcmV0ID0gZnNja19jaGtfZGF0YV9ibGsoc2Jp
LCBJU19DQVNFRk9MREVEKGlub2RlKSwKPiA+IC0gICAgICAgICAgICAgICAgICAgICBibGthZGRy
LCBjaGlsZCwKPiA+ICsgICAgICAgICAgICAgcmV0ID0gZnNja19jaGtfZGF0YV9ibGsoc2JpLCBp
bm9kZSwgYmxrYWRkciwgY2hpbGQsCj4gPiAgICAgICAgICAgICAgICAgICAgICAgbGU2NF90b19j
cHUoaW5vZGUtPmlfYmxvY2tzKSA9PSAqYmxrX2NudCwgZnR5cGUsCj4gPiAtICAgICAgICAgICAg
ICAgICAgICAgbmlkLCBpZHgsIG5pLT52ZXJzaW9uLAo+ID4gLSAgICAgICAgICAgICAgICAgICAg
IGZpbGVfaXNfZW5jcnlwdChpbm9kZSksIG5vZGVfYmxrKTsKPiA+ICsgICAgICAgICAgICAgICAg
ICAgICBuaWQsIGlkeCwgbmktPnZlcnNpb24sIG5vZGVfYmxrKTsKPiA+ICAgICAgICAgICAgICAg
aWYgKGJsa2FkZHIgIT0gbGUzMl90b19jcHUobm9kZV9ibGstPmRuLmFkZHJbaWR4XSkpCj4gPiAg
ICAgICAgICAgICAgICAgICAgICAgbmVlZF9maXggPSAxOwo+ID4gICAgICAgICAgICAgICBpZiAo
IXJldCkgewo+ID4gQEAgLTIwNDQsMTIgKzIwNzAsMTUgQEAgaW50IGZzY2tfY2hrX2RlbnRyeV9i
bGsoc3RydWN0IGYyZnNfc2JfaW5mbyAqc2JpLCBpbnQgY2FzZWZvbGRlZCwgdTMyIGJsa19hZGRy
LAo+ID4gICAgICAgcmV0dXJuIDA7Cj4gPiAgfQo+ID4KPiA+IC1pbnQgZnNja19jaGtfZGF0YV9i
bGsoc3RydWN0IGYyZnNfc2JfaW5mbyAqc2JpLCBpbnQgY2FzZWZvbGRlZCwKPiA+ICtpbnQgZnNj
a19jaGtfZGF0YV9ibGsoc3RydWN0IGYyZnNfc2JfaW5mbyAqc2JpLCBzdHJ1Y3QgZjJmc19pbm9k
ZSAqaW5vZGUsCj4gPiAgICAgICAgICAgICAgIHUzMiBibGtfYWRkciwgc3RydWN0IGNoaWxkX2lu
Zm8gKmNoaWxkLCBpbnQgbGFzdF9ibGssCj4gPiAgICAgICAgICAgICAgIGVudW0gRklMRV9UWVBF
IGZ0eXBlLCB1MzIgcGFyZW50X25pZCwgdTE2IGlkeF9pbl9ub2RlLCB1OCB2ZXIsCj4gPiAtICAg
ICAgICAgICAgIGludCBlbmNfbmFtZSwgc3RydWN0IGYyZnNfbm9kZSAqbm9kZV9ibGspCj4gPiAr
ICAgICAgICAgICAgIHN0cnVjdCBmMmZzX25vZGUgKm5vZGVfYmxrKQo+ID4gIHsKPiA+ICAgICAg
IHN0cnVjdCBmMmZzX2ZzY2sgKmZzY2sgPSBGMkZTX0ZTQ0soc2JpKTsKPiA+ICsgICAgIGludCBj
YXNlZm9sZGVkID0gSVNfQ0FTRUZPTERFRChpbm9kZSk7Cj4gPiArICAgICBpbnQgZW5jX25hbWUg
PSBmaWxlX2lzX2VuY3J5cHQoaW5vZGUpOwo+ID4gKyAgICAgaW50IGFsaWFzaW5nID0gSVNfREVW
SUNFX0FMSUFTSU5HKGlub2RlKTsKPiA+Cj4gPiAgICAgICAvKiBJcyBpdCByZXNlcnZlZCBibG9j
az8gKi8KPiA+ICAgICAgIGlmIChibGtfYWRkciA9PSBORVdfQUREUikgewo+ID4gQEAgLTIwNjIs
NyArMjA5MSw3IEBAIGludCBmc2NrX2Noa19kYXRhX2JsayhzdHJ1Y3QgZjJmc19zYl9pbmZvICpz
YmksIGludCBjYXNlZm9sZGVkLAo+ID4gICAgICAgICAgICAgICByZXR1cm4gLUVJTlZBTDsKPiA+
ICAgICAgIH0KPiA+Cj4gPiAtICAgICBpZiAoaXNfdmFsaWRfc3NhX2RhdGFfYmxrKHNiaSwgYmxr
X2FkZHIsIHBhcmVudF9uaWQsCj4gPiArICAgICBpZiAoIWFsaWFzaW5nICYmIGlzX3ZhbGlkX3Nz
YV9kYXRhX2JsayhzYmksIGJsa19hZGRyLCBwYXJlbnRfbmlkLAo+ID4gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeF9pbl9ub2RlLCB2ZXIpKSB7Cj4gPiAg
ICAgICAgICAgICAgIEFTU0VSVF9NU0coInN1bW1hcnkgZGF0YSBibG9jayBpcyBub3QgdmFsaWQu
IFsweCV4XSIsCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgcGFyZW50X25pZCk7Cj4gPiBkaWZmIC0tZ2l0IGEvZnNjay9mc2NrLmggYi9mc2NrL2ZzY2su
aAo+ID4gaW5kZXggYThmMTg3ZS4uYTI2MjVlZiAxMDA2NDQKPiA+IC0tLSBhL2ZzY2svZnNjay5o
Cj4gPiArKysgYi9mc2NrL2ZzY2suaAo+ID4gQEAgLTE3OSw5ICsxNzksOSBAQCBleHRlcm4gaW50
IGZzY2tfY2hrX2lkbm9kZV9ibGsoc3RydWN0IGYyZnNfc2JfaW5mbyAqLCBzdHJ1Y3QgZjJmc19p
bm9kZSAqLAo+ID4gIGV4dGVybiBpbnQgZnNja19jaGtfZGlkbm9kZV9ibGsoc3RydWN0IGYyZnNf
c2JfaW5mbyAqLCBzdHJ1Y3QgZjJmc19pbm9kZSAqLAo+ID4gICAgICAgICAgICAgICBlbnVtIEZJ
TEVfVFlQRSwgc3RydWN0IGYyZnNfbm9kZSAqLCB1MzIgKiwKPiA+ICAgICAgICAgICAgICAgc3Ry
dWN0IGYyZnNfY29tcHJfYmxrX2NudCAqLCBzdHJ1Y3QgY2hpbGRfaW5mbyAqKTsKPiA+IC1leHRl
cm4gaW50IGZzY2tfY2hrX2RhdGFfYmxrKHN0cnVjdCBmMmZzX3NiX2luZm8gKiwgaW50LAo+ID4g
K2V4dGVybiBpbnQgZnNja19jaGtfZGF0YV9ibGsoc3RydWN0IGYyZnNfc2JfaW5mbyAqLCBzdHJ1
Y3QgZjJmc19pbm9kZSAqLAo+ID4gICAgICAgICAgICAgICB1MzIsIHN0cnVjdCBjaGlsZF9pbmZv
ICosIGludCwgZW51bSBGSUxFX1RZUEUsIHUzMiwgdTE2LCB1OCwKPiA+IC0gICAgICAgICAgICAg
aW50LCBzdHJ1Y3QgZjJmc19ub2RlICopOwo+ID4gKyAgICAgICAgICAgICBzdHJ1Y3QgZjJmc19u
b2RlICopOwo+ID4gIGV4dGVybiBpbnQgZnNja19jaGtfZGVudHJ5X2JsayhzdHJ1Y3QgZjJmc19z
Yl9pbmZvICosIGludCwKPiA+ICAgICAgICAgICAgICAgdTMyLCBzdHJ1Y3QgY2hpbGRfaW5mbyAq
LCBpbnQsIGludCwgc3RydWN0IGYyZnNfbm9kZSAqKTsKPiA+ICBpbnQgZnNja19jaGtfaW5saW5l
X2RlbnRyaWVzKHN0cnVjdCBmMmZzX3NiX2luZm8gKiwgc3RydWN0IGYyZnNfbm9kZSAqLAo+ID4g
ZGlmZiAtLWdpdCBhL2ZzY2svbWFpbi5jIGIvZnNjay9tYWluLmMKPiA+IGluZGV4IDg4ODE5MzYu
LjlkZDgzNGYgMTAwNjQ0Cj4gPiAtLS0gYS9mc2NrL21haW4uYwo+ID4gKysrIGIvZnNjay9tYWlu
LmMKPiA+IEBAIC0xMDE1LDYgKzEwMTUsMTEgQEAgc3RhdGljIGludCBkb19kZWZyYWcoc3RydWN0
IGYyZnNfc2JfaW5mbyAqc2JpKQo+ID4gICAgICAgICAgICAgICByZXR1cm4gLTE7Cj4gPiAgICAg
ICB9Cj4gPgo+ID4gKyAgICAgaWYgKGdldF9zYihmZWF0dXJlKSAmIEYyRlNfRkVBVFVSRV9ERVZJ
Q0VfQUxJQVMpIHsKPiA+ICsgICAgICAgICAgICAgTVNHKDAsICJOb3Qgc3VwcG9ydCBvbiBpbWFn
ZSB3aXRoIGRldmljZSBhbGlhc2luZyBmZWF0dXJlLlxuIik7Cj4gPiArICAgICAgICAgICAgIHJl
dHVybiAtMTsKPiA+ICsgICAgIH0KPiA+ICsKPiA+ICAgICAgIGlmIChjLmRlZnJhZ19zdGFydCA+
IGdldF9zYihibG9ja19jb3VudCkpCj4gPiAgICAgICAgICAgICAgIGdvdG8gb3V0X3JhbmdlOwo+
ID4gICAgICAgaWYgKGMuZGVmcmFnX3N0YXJ0IDwgU01fSShzYmkpLT5tYWluX2Jsa2FkZHIpCj4g
PiBkaWZmIC0tZ2l0IGEvaW5jbHVkZS9mMmZzX2ZzLmggYi9pbmNsdWRlL2YyZnNfZnMuaAo+ID4g
aW5kZXggMTVhMWM4Mi4uYTgzODBkZiAxMDA2NDQKPiA+IC0tLSBhL2luY2x1ZGUvZjJmc19mcy5o
Cj4gPiArKysgYi9pbmNsdWRlL2YyZnNfZnMuaAo+ID4gQEAgLTQ0NCw2ICs0NDQsNyBAQCBzdHJ1
Y3QgZGV2aWNlX2luZm8gewo+ID4gICAgICAgdWludDY0X3Qgc3RhcnRfYmxrYWRkcjsKPiA+ICAg
ICAgIHVpbnQ2NF90IGVuZF9ibGthZGRyOwo+ID4gICAgICAgdWludDMyX3QgdG90YWxfc2VnbWVu
dHM7Cj4gPiArICAgICBjaGFyICphbGlhc19maWxlbmFtZTsKPiA+Cj4gPiAgICAgICAvKiB0byBo
YW5kbGUgem9uZSBibG9jayBkZXZpY2VzICovCj4gPiAgICAgICBpbnQgem9uZWRfbW9kZWw7Cj4g
PiBAQCAtNjY2LDYgKzY2Nyw4IEBAIGVudW0gewo+ID4gICNkZWZpbmUgRjJGU19JTU1VVEFCTEVf
RkwgICAgICAgICAgICAweDAwMDAwMDEwIC8qIEltbXV0YWJsZSBmaWxlICovCj4gPiAgI2RlZmlu
ZSBGMkZTX05PQVRJTUVfRkwgICAgICAgICAgICAgICAgICAgICAgMHgwMDAwMDA4MCAvKiBkbyBu
b3QgdXBkYXRlIGF0aW1lICovCj4gPiAgI2RlZmluZSBGMkZTX0NBU0VGT0xEX0ZMICAgICAgICAg
ICAgIDB4NDAwMDAwMDAgLyogQ2FzZWZvbGRlZCBmaWxlICovCj4gPiArI2RlZmluZSBGMkZTX0RF
VklDRV9BTElBU19GTCAgICAgICAgIDB4ODAwMDAwMDAgLyogRmlsZSBmb3IgYWxpYXNpbmcgYSBk
ZXZpY2UgKi8KPiA+ICsjZGVmaW5lIElTX0RFVklDRV9BTElBU0lORyhmaSkgICAgICAgKChmaSkt
PmlfZmxhZ3MgJiBjcHVfdG9fbGUzMihGMkZTX0RFVklDRV9BTElBU19GTCkpCj4gPgo+ID4gICNk
ZWZpbmUgRjJGU19FTkNfVVRGOF8xMl8xICAgMQo+ID4gICNkZWZpbmUgRjJGU19FTkNfU1RSSUNU
X01PREVfRkwgICAgICAoMSA8PCAwKQo+ID4gQEAgLTY5OCw2ICs3MDEsNyBAQCBlbnVtIHsKPiA+
ICAjZGVmaW5lIEYyRlNfRkVBVFVSRV9DQVNFRk9MRCAgICAgICAgICAgICAgICAweDEwMDAKPiA+
ICAjZGVmaW5lIEYyRlNfRkVBVFVSRV9DT01QUkVTU0lPTiAgICAgMHgyMDAwCj4gPiAgI2RlZmlu
ZSBGMkZTX0ZFQVRVUkVfUk8gICAgICAgICAgICAgICAgICAgICAgMHg0MDAwCj4gPiArI2RlZmlu
ZSBGMkZTX0ZFQVRVUkVfREVWSUNFX0FMSUFTICAgIDB4ODAwMAo+ID4KPiA+ICAjZGVmaW5lIE1B
WF9OUl9GRUFUVVJFICAgICAgICAgICAgICAgICAgICAgICAzMgo+ID4KPiA+IEBAIC0xNTIwLDEx
ICsxNTI0LDE0IEBAIHN0cnVjdCBmMmZzX2NvbmZpZ3VyYXRpb24gewo+ID4gICAgICAgdGltZV90
IGZpeGVkX3RpbWU7Cj4gPiAgICAgICBpbnQgcm9sbF9mb3J3YXJkOwo+ID4gICAgICAgYm9vbCBu
ZWVkX2ZzeW5jOwo+ID4gKyAgICAgaW50IGFsaWFzZWRfZGV2aWNlczsKPiA+ICsgICAgIHVpbnQz
Ml90IGFsaWFzZWRfc2VnbWVudHM7Cj4gPgo+ID4gICAgICAgLyogbWtmcyBwYXJhbWV0ZXJzICov
Cj4gPiAgICAgICBpbnQgZmFrZV9zZWVkOwo+ID4gICAgICAgdWludDMyX3QgbmV4dF9mcmVlX25p
ZDsKPiA+ICAgICAgIHVpbnQzMl90IGxwZl9pbm87Cj4gPiArICAgICB1aW50MzJfdCBmaXJzdF9h
bGlhc19pbm87Cj4gPiAgICAgICB1aW50MzJfdCByb290X3VpZDsKPiA+ICAgICAgIHVpbnQzMl90
IHJvb3RfZ2lkOwo+ID4gICAgICAgdWludDMyX3QgYmxrc2l6ZTsKPiA+IGRpZmYgLS1naXQgYS9t
a2ZzL2YyZnNfZm9ybWF0LmMgYi9ta2ZzL2YyZnNfZm9ybWF0LmMKPiA+IGluZGV4IDI0N2E4MzYu
LjgwYjE0MGYgMTAwNjQ0Cj4gPiAtLS0gYS9ta2ZzL2YyZnNfZm9ybWF0LmMKPiA+ICsrKyBiL21r
ZnMvZjJmc19mb3JtYXQuYwo+ID4gQEAgLTEzLDYgKzEzLDcgQEAKPiA+ICAjaW5jbHVkZSA8dW5p
c3RkLmg+Cj4gPiAgI2luY2x1ZGUgPGYyZnNfZnMuaD4KPiA+ICAjaW5jbHVkZSA8YXNzZXJ0Lmg+
Cj4gPiArI2luY2x1ZGUgPHN0ZGJvb2wuaD4KPiA+Cj4gPiAgI2lmZGVmIEhBVkVfU1lTX1NUQVRf
SAo+ID4gICNpbmNsdWRlIDxzeXMvc3RhdC5oPgo+ID4gQEAgLTM5LDEwICs0MCw2MiBAQCBzdHJ1
Y3QgZjJmc19zdXBlcl9ibG9jayByYXdfc2I7Cj4gPiAgc3RydWN0IGYyZnNfc3VwZXJfYmxvY2sg
KnNiID0gJnJhd19zYjsKPiA+ICBzdHJ1Y3QgZjJmc19jaGVja3BvaW50ICpjcDsKPiA+Cj4gPiAr
c3RhdGljIGlubGluZSBib29sIGRldmljZV9pc19hbGlhc2VkKHVuc2lnbmVkIGludCBkZXZfbnVt
KQo+ID4gK3sKPiA+ICsgICAgIGlmIChkZXZfbnVtID49IGMubmRldnMpCj4gPiArICAgICAgICAg
ICAgIHJldHVybiBmYWxzZTsKPiA+ICsgICAgIHJldHVybiBjLmRldmljZXNbZGV2X251bV0uYWxp
YXNfZmlsZW5hbWUgIT0gTlVMTDsKPiA+ICt9Cj4gPiArCj4gPiArc3RhdGljIGlubGluZSB1bnNp
Z25lZCBpbnQgdGFyZ2V0X2RldmljZV9pbmRleCh1aW50NjRfdCBibGthZGRyKQo+ID4gK3sKPiA+
ICsgICAgIGludCBpOwo+ID4gKwo+ID4gKyAgICAgZm9yIChpID0gMDsgaSA8IGMubmRldnM7IGkr
KykKPiA+ICsgICAgICAgICAgICAgaWYgKGMuZGV2aWNlc1tpXS5zdGFydF9ibGthZGRyIDw9IGJs
a2FkZHIgJiYKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMuZGV2aWNlc1tpXS5l
bmRfYmxrYWRkciA+PSBibGthZGRyKQo+ID4gKyAgICAgICAgICAgICAgICAgICAgIHJldHVybiBp
Owo+ID4gKyAgICAgcmV0dXJuIDA7Cj4gPiArfQo+ID4gKwo+ID4gKyNkZWZpbmUgR0VUX1NFR05P
KGJsa19hZGRyKSAoKGJsa19hZGRyIC0gZ2V0X3NiKG1haW5fYmxrYWRkcikpIC8gXAo+ID4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5ibGtzX3Blcl9zZWcpCj4gPiArI2RlZmluZSBT
VEFSVF9CTE9DSyhzZWdubykgKHNlZ25vICogYy5ibGtzX3Blcl9zZWcgKyBnZXRfc2IobWFpbl9i
bGthZGRyKSkKPiA+ICsKPiA+ICAvKiBSZXR1cm4gZmlyc3Qgc2VnbWVudCBudW1iZXIgb2YgZWFj
aCBhcmVhICovCj4gPiAtI2RlZmluZSBwcmV2X3pvbmUoY3VyKSAgICAgICAgICAgICAgIChjLmN1
cl9zZWdbY3VyXSAtIGMuc2Vnc19wZXJfem9uZSkKPiA+IC0jZGVmaW5lIG5leHRfem9uZShjdXIp
ICAgICAgICAgICAgICAgKGMuY3VyX3NlZ1tjdXJdICsgYy5zZWdzX3Blcl96b25lKQo+ID4gLSNk
ZWZpbmUgbGFzdF96b25lKGN1cikgICAgICAgICAgICAgICAoKGN1ciAtIDEpICogYy5zZWdzX3Bl
cl96b25lKQo+ID4gK3N0YXRpYyBpbmxpbmUgdWludDMyX3QgbmV4dF96b25lKGludCBzZWdfdHlw
ZSkKPiA+ICt7Cj4gPiArICAgICB1aW50MzJfdCBuZXh0X3NlZyA9IGMuY3VyX3NlZ1tzZWdfdHlw
ZV0gKyBjLnNlZ3NfcGVyX3pvbmU7Cj4gPiArICAgICB1aW50NjRfdCBuZXh0X2Jsa2FkZHIgPSBT
VEFSVF9CTE9DSyhuZXh0X3NlZyk7Cj4gPiArICAgICBpbnQgZGV2X251bTsKPiA+ICsKPiA+ICsg
ICAgIGRldl9udW0gPSB0YXJnZXRfZGV2aWNlX2luZGV4KG5leHRfYmxrYWRkcik7Cj4gPiArICAg
ICBpZiAoIWRldmljZV9pc19hbGlhc2VkKGRldl9udW0pKQo+ID4gKyAgICAgICAgICAgICByZXR1
cm4gR0VUX1NFR05PKG5leHRfYmxrYWRkcik7Cj4gPiArCj4gPiArICAgICB3aGlsZSAoZGV2X251
bSA8IGMubmRldnMgJiYgZGV2aWNlX2lzX2FsaWFzZWQoZGV2X251bSkpCj4gPiArICAgICAgICAg
ICAgIGRldl9udW0rKzsKPiA+ICsKPiA+ICsgICAgIHJldHVybiBHRVRfU0VHTk8oYy5kZXZpY2Vz
W2Rldl9udW0gLSAxXS5lbmRfYmxrYWRkciArIDEpOwo+ID4gK30KPiA+ICsKPiA+ICtzdGF0aWMg
aW5saW5lIHVpbnQzMl90IGxhc3Rfem9uZSh1aW50MzJfdCB0b3RhbF96b25lKQo+ID4gK3sKPiA+
ICsgICAgIHVpbnQzMl90IGxhc3Rfc2VnID0gKHRvdGFsX3pvbmUgLSAxKSAqIGMuc2Vnc19wZXJf
em9uZTsKPiA+ICsgICAgIHVpbnQ2NF90IGxhc3RfYmxrYWRkciA9IFNUQVJUX0JMT0NLKGxhc3Rf
c2VnKTsKPiA+ICsgICAgIGludCBkZXZfbnVtOwo+ID4gKwo+ID4gKyAgICAgZGV2X251bSA9IHRh
cmdldF9kZXZpY2VfaW5kZXgobGFzdF9ibGthZGRyKTsKPiA+ICsgICAgIGlmICghZGV2aWNlX2lz
X2FsaWFzZWQoZGV2X251bSkpCj4gPiArICAgICAgICAgICAgIHJldHVybiBHRVRfU0VHTk8obGFz
dF9ibGthZGRyKTsKPiA+ICsKPiA+ICsgICAgIHdoaWxlIChkZXZfbnVtID4gMCAmJiBkZXZpY2Vf
aXNfYWxpYXNlZChkZXZfbnVtKSkKPiA+ICsgICAgICAgICAgICAgZGV2X251bS0tOwo+ID4gKwo+
ID4gKyAgICAgcmV0dXJuIEdFVF9TRUdOTyhjLmRldmljZXNbZGV2X251bSArIDFdLnN0YXJ0X2Js
a2FkZHIpIC0KPiA+ICsgICAgICAgICAgICAgYy5zZWdzX3Blcl96b25lOwo+ID4gK30KPiA+ICsK
PiA+ICAjZGVmaW5lIGxhc3Rfc2VjdGlvbihjdXIpICAgIChjdXIgKyAoYy5zZWNzX3Blcl96b25l
IC0gMSkgKiBjLnNlZ3NfcGVyX3NlYykKPiA+Cj4gPiAgLyogUmV0dXJuIHRpbWUgZml4ZWQgYnkg
dGhlIHVzZXIgb3IgY3VycmVudCB0aW1lIGJ5IGRlZmF1bHQgKi8KPiA+IEBAIC0yMjAsNyArMjcz
LDcgQEAgc3RhdGljIGludCBmMmZzX3ByZXBhcmVfc3VwZXJfYmxvY2sodm9pZCkKPiA+ICAgICAg
IHVpbnQ2NF90IHRvdGFsX21ldGFfem9uZXMsIHRvdGFsX21ldGFfc2VnbWVudHM7Cj4gPiAgICAg
ICB1aW50MzJfdCBzaXRfYml0bWFwX3NpemUsIG1heF9zaXRfYml0bWFwX3NpemU7Cj4gPiAgICAg
ICB1aW50MzJfdCBtYXhfbmF0X2JpdG1hcF9zaXplLCBtYXhfbmF0X3NlZ21lbnRzOwo+ID4gLSAg
ICAgdWludDMyX3QgdG90YWxfem9uZXMsIGF2YWlsX3pvbmVzOwo+ID4gKyAgICAgdWludDMyX3Qg
dG90YWxfem9uZXMsIGF2YWlsX3pvbmVzID0gMDsKPiA+ICAgICAgIGVudW0gcXVvdGFfdHlwZSBx
dHlwZTsKPiA+ICAgICAgIGludCBpOwo+ID4KPiA+IEBAIC0zMTQsNiArMzY3LDE2IEBAIHN0YXRp
YyBpbnQgZjJmc19wcmVwYXJlX3N1cGVyX2Jsb2NrKHZvaWQpCj4gPiAgICAgICAgICAgICAgICAg
ICAgICAgYy5kZXZpY2VzW2ldLmVuZF9ibGthZGRyID0gYy5kZXZpY2VzW2ldLnN0YXJ0X2Jsa2Fk
ZHIgKwo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLmRldmljZXNb
aV0udG90YWxfc2VnbWVudHMgKgo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBjLmJsa3NfcGVyX3NlZyAtIDE7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgaWYgKGRl
dmljZV9pc19hbGlhc2VkKGkpKSB7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICBp
ZiAoYy5kZXZpY2VzW2ldLnpvbmVkX21vZGVsID09Cj4gPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgRjJGU19aT05FRF9ITSkgewo+ID4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBNU0coMSwgIlx0RXJyb3I6IGRvIG5vdCBzdXBwb3J0
ICIKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRldmljZSBhbGlh
c2luZyBmb3IgZGV2aWNlWyVkXVxuIiwgaSk7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHJldHVybiAtMTsKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IH0KPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMuYWxpYXNlZF9zZWdtZW50cyAr
PQo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLmRldmljZXNbaV0u
dG90YWxfc2VnbWVudHM7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgfQo+ID4gICAgICAgICAg
ICAgICB9Cj4gPiAgICAgICAgICAgICAgIGlmIChjLm5kZXZzID4gMSkgewo+ID4gICAgICAgICAg
ICAgICAgICAgICAgIHN0cm5jcHkoKGNoYXIgKilzYi0+ZGV2c1tpXS5wYXRoLCBjLmRldmljZXNb
aV0ucGF0aCwgTUFYX1BBVEhfTEVOKTsKPiA+IEBAIC01MzEsMTAgKzU5NCwxNiBAQCBzdGF0aWMg
aW50IGYyZnNfcHJlcGFyZV9zdXBlcl9ibG9jayh2b2lkKQo+ID4gICAgICAgaWYgKGMuZmVhdHVy
ZSAmIEYyRlNfRkVBVFVSRV9MT1NUX0ZPVU5EKQo+ID4gICAgICAgICAgICAgICBjLmxwZl9pbm8g
PSBjLm5leHRfZnJlZV9uaWQrKzsKPiA+Cj4gPiArICAgICBpZiAoYy5hbGlhc2VkX2RldmljZXMp
IHsKPiA+ICsgICAgICAgICAgICAgYy5maXJzdF9hbGlhc19pbm8gPSBjLm5leHRfZnJlZV9uaWQ7
Cj4gPiArICAgICAgICAgICAgIGMubmV4dF9mcmVlX25pZCArPSBjLmFsaWFzZWRfZGV2aWNlczsK
PiA+ICsgICAgICAgICAgICAgYXZhaWxfem9uZXMgKz0gYy5hbGlhc2VkX3NlZ21lbnRzIC8gYy5z
ZWdzX3Blcl96b25lOwo+ID4gKyAgICAgfQo+ID4gKwo+ID4gICAgICAgaWYgKGMuZmVhdHVyZSAm
IEYyRlNfRkVBVFVSRV9STykKPiA+IC0gICAgICAgICAgICAgYXZhaWxfem9uZXMgPSAyOwo+ID4g
KyAgICAgICAgICAgICBhdmFpbF96b25lcyArPSAyOwo+ID4gICAgICAgZWxzZQo+ID4gLSAgICAg
ICAgICAgICBhdmFpbF96b25lcyA9IDY7Cj4gPiArICAgICAgICAgICAgIGF2YWlsX3pvbmVzICs9
IDY7Cj4gPgo+ID4gICAgICAgaWYgKHRvdGFsX3pvbmVzIDw9IGF2YWlsX3pvbmVzKSB7Cj4gPiAg
ICAgICAgICAgICAgIE1TRygxLCAiXHRFcnJvcjogJWQgem9uZXM6IE5lZWQgbW9yZSB6b25lcyAi
Cj4gPiBAQCAtNzAxLDYgKzc3MCw3IEBAIHN0YXRpYyBpbnQgZjJmc193cml0ZV9jaGVja19wb2lu
dF9wYWNrKHZvaWQpCj4gPiAgICAgICBjaGFyICpzdW1fY29tcGFjdCwgKnN1bV9jb21wYWN0X3A7
Cj4gPiAgICAgICBzdHJ1Y3QgZjJmc19zdW1tYXJ5ICpzdW1fZW50cnk7Cj4gPiAgICAgICB1bnNp
Z25lZCBzaG9ydCB2YmxvY2tzOwo+ID4gKyAgICAgdWludDMyX3QgdXNlZF9zZWdtZW50cyA9IGMu
YWxpYXNlZF9zZWdtZW50czsKPiA+ICAgICAgIGludCByZXQgPSAtMTsKPiA+Cj4gPiAgICAgICBj
cCA9IGNhbGxvYyhGMkZTX0JMS1NJWkUsIDEpOwo+ID4gQEAgLTc1Miw5ICs4MjIsMTQgQEAgc3Rh
dGljIGludCBmMmZzX3dyaXRlX2NoZWNrX3BvaW50X3BhY2sodm9pZCkKPiA+ICAgICAgIH0KPiA+
Cj4gPiAgICAgICBzZXRfY3AoY3VyX25vZGVfYmxrb2ZmWzBdLCBjLmN1cnNlZ19vZmZzZXRbQ1VS
U0VHX0hPVF9OT0RFXSk7Cj4gPiArICAgICBzZXRfY3AoY3VyX25vZGVfYmxrb2ZmWzJdLCBjLmN1
cnNlZ19vZmZzZXRbQ1VSU0VHX0NPTERfTk9ERV0pOwo+ID4gICAgICAgc2V0X2NwKGN1cl9kYXRh
X2Jsa29mZlswXSwgYy5jdXJzZWdfb2Zmc2V0W0NVUlNFR19IT1RfREFUQV0pOwo+ID4gKyAgICAg
c2V0X2NwKGN1cl9kYXRhX2Jsa29mZlsyXSwgYy5jdXJzZWdfb2Zmc2V0W0NVUlNFR19DT0xEX0RB
VEFdKTsKPiA+ICAgICAgIHNldF9jcCh2YWxpZF9ibG9ja19jb3VudCwgYy5jdXJzZWdfb2Zmc2V0
W0NVUlNFR19IT1RfTk9ERV0gKwo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBjLmN1cnNlZ19vZmZzZXRbQ1VSU0VHX0hPVF9EQVRBXSk7Cj4gPiArICAgICAgICAgICAg
ICAgICAgICAgYy5jdXJzZWdfb2Zmc2V0W0NVUlNFR19IT1RfREFUQV0gKwo+ID4gKyAgICAgICAg
ICAgICAgICAgICAgIGMuY3Vyc2VnX29mZnNldFtDVVJTRUdfQ09MRF9OT0RFXSArCj4gPiArICAg
ICAgICAgICAgICAgICAgICAgYy5jdXJzZWdfb2Zmc2V0W0NVUlNFR19DT0xEX0RBVEFdICsKPiA+
ICsgICAgICAgICAgICAgICAgICAgICBjLmFsaWFzZWRfc2VnbWVudHMgKiBjLmJsa3NfcGVyX3Nl
Zyk7Cj4gPiAgICAgICBzZXRfY3AocnN2ZF9zZWdtZW50X2NvdW50LCBjLnJlc2VydmVkX3NlZ21l
bnRzKTsKPiA+Cj4gPiAgICAgICAvKgo+ID4gQEAgLTgwMSwxNSArODc2LDE2IEBAIHN0YXRpYyBp
bnQgZjJmc193cml0ZV9jaGVja19wb2ludF9wYWNrKHZvaWQpCj4gPiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGMucmVzZXJ2ZWRfc2VnbWVudHMpOwo+ID4KPiA+ICAgICAg
IC8qIG1haW4gc2VnbWVudHMgLSByZXNlcnZlZCBzZWdtZW50cyAtIChub2RlICsgZGF0YSBzZWdt
ZW50cykgKi8KPiA+IC0gICAgIGlmIChjLmZlYXR1cmUgJiBGMkZTX0ZFQVRVUkVfUk8pIHsKPiA+
IC0gICAgICAgICAgICAgc2V0X2NwKGZyZWVfc2VnbWVudF9jb3VudCwgZjJmc19nZXRfdXNhYmxl
X3NlZ21lbnRzKHNiKSAtIDIpOwo+ID4gLSAgICAgICAgICAgICBzZXRfY3AodXNlcl9ibG9ja19j
b3VudCwgKChnZXRfY3AoZnJlZV9zZWdtZW50X2NvdW50KSArIDIgLQo+ID4gLSAgICAgICAgICAg
ICAgICAgICAgIGdldF9jcChvdmVycHJvdl9zZWdtZW50X2NvdW50KSkgKiBjLmJsa3NfcGVyX3Nl
ZykpOwo+ID4gLSAgICAgfSBlbHNlIHsKPiA+IC0gICAgICAgICAgICAgc2V0X2NwKGZyZWVfc2Vn
bWVudF9jb3VudCwgZjJmc19nZXRfdXNhYmxlX3NlZ21lbnRzKHNiKSAtIDYpOwo+ID4gLSAgICAg
ICAgICAgICBzZXRfY3AodXNlcl9ibG9ja19jb3VudCwgKChnZXRfY3AoZnJlZV9zZWdtZW50X2Nv
dW50KSArIDYgLQo+ID4gLSAgICAgICAgICAgICAgICAgICAgIGdldF9jcChvdmVycHJvdl9zZWdt
ZW50X2NvdW50KSkgKiBjLmJsa3NfcGVyX3NlZykpOwo+ID4gLSAgICAgfQo+ID4gKyAgICAgaWYg
KGMuZmVhdHVyZSAmIEYyRlNfRkVBVFVSRV9STykKPiA+ICsgICAgICAgICAgICAgdXNlZF9zZWdt
ZW50cyArPSAyOwo+ID4gKyAgICAgZWxzZQo+ID4gKyAgICAgICAgICAgICB1c2VkX3NlZ21lbnRz
ICs9IDY7Cj4gPiArCj4gPiArICAgICBzZXRfY3AodXNlcl9ibG9ja19jb3VudCwgKGYyZnNfZ2V0
X3VzYWJsZV9zZWdtZW50cyhzYikgLQo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGdldF9jcChv
dmVycHJvdl9zZWdtZW50X2NvdW50KSkgKiBjLmJsa3NfcGVyX3NlZyk7Cj4gPiArICAgICBzZXRf
Y3AoZnJlZV9zZWdtZW50X2NvdW50LCBmMmZzX2dldF91c2FibGVfc2VnbWVudHMoc2IpIC0KPiA+
ICsgICAgICAgICAgICAgICAgICAgICB1c2VkX3NlZ21lbnRzKTsKPiA+ICsKPiA+ICAgICAgIC8q
IGNwIHBhZ2UgKDIpLCBkYXRhIHN1bW1hcmllcyAoMSksIG5vZGUgc3VtbWFyaWVzICgzKSAqLwo+
ID4gICAgICAgc2V0X2NwKGNwX3BhY2tfdG90YWxfYmxvY2tfY291bnQsIDYgKyBnZXRfc2IoY3Bf
cGF5bG9hZCkpOwo+ID4gICAgICAgZmxhZ3MgPSBDUF9VTU9VTlRfRkxBRyB8IENQX0NPTVBBQ1Rf
U1VNX0ZMQUc7Cj4gPiBAQCAtODI1LDggKzkwMSwxMCBAQCBzdGF0aWMgaW50IGYyZnNfd3JpdGVf
Y2hlY2tfcG9pbnRfcGFjayh2b2lkKQo+ID4KPiA+ICAgICAgIHNldF9jcChja3B0X2ZsYWdzLCBm
bGFncyk7Cj4gPiAgICAgICBzZXRfY3AoY3BfcGFja19zdGFydF9zdW0sIDEgKyBnZXRfc2IoY3Bf
cGF5bG9hZCkpOwo+ID4gLSAgICAgc2V0X2NwKHZhbGlkX25vZGVfY291bnQsIGMuY3Vyc2VnX29m
ZnNldFtDVVJTRUdfSE9UX05PREVdKTsKPiA+IC0gICAgIHNldF9jcCh2YWxpZF9pbm9kZV9jb3Vu
dCwgYy5jdXJzZWdfb2Zmc2V0W0NVUlNFR19IT1RfTk9ERV0pOwo+ID4gKyAgICAgc2V0X2NwKHZh
bGlkX25vZGVfY291bnQsIGMuY3Vyc2VnX29mZnNldFtDVVJTRUdfSE9UX05PREVdICsKPiA+ICsg
ICAgICAgICAgICAgICAgICAgICBjLmN1cnNlZ19vZmZzZXRbQ1VSU0VHX0NPTERfTk9ERV0pOwo+
ID4gKyAgICAgc2V0X2NwKHZhbGlkX2lub2RlX2NvdW50LCBjLmN1cnNlZ19vZmZzZXRbQ1VSU0VH
X0hPVF9OT0RFXSArCj4gPiArICAgICAgICAgICAgICAgICAgICAgYy5jdXJzZWdfb2Zmc2V0W0NV
UlNFR19DT0xEX05PREVdKTsKPiA+ICAgICAgIHNldF9jcChuZXh0X2ZyZWVfbmlkLCBjLm5leHRf
ZnJlZV9uaWQpOwo+ID4gICAgICAgc2V0X2NwKHNpdF92ZXJfYml0bWFwX2J5dGVzaXplLCAoKGdl
dF9zYihzZWdtZW50X2NvdW50X3NpdCkgLyAyKSA8PAo+ID4gICAgICAgICAgICAgICAgICAgICAg
IGdldF9zYihsb2dfYmxvY2tzX3Blcl9zZWcpKSAvIDgpOwo+ID4gQEAgLTk3NCw5ICsxMDUyLDEy
IEBAIHN0YXRpYyBpbnQgZjJmc193cml0ZV9jaGVja19wb2ludF9wYWNrKHZvaWQpCj4gPiAgICAg
ICAgICAgICAgIGdvdG8gZnJlZV9jcF9wYXlsb2FkOwo+ID4gICAgICAgfQo+ID4KPiA+IC0gICAg
IC8qIEZpbGwgc2VnbWVudCBzdW1tYXJ5IGZvciBDT0xEX05PREUgdG8gemVyby4gKi8KPiA+ICsg
ICAgIC8qIFByZXBhcmUgYW5kIHdyaXRlIFNlZ21lbnQgc3VtbWFyeSBmb3IgQ09MRF9OT0RFICov
Cj4gPiAgICAgICBtZW1zZXQoc3VtLCAwLCBGMkZTX0JMS1NJWkUpOwo+ID4gICAgICAgU0VUX1NV
TV9UWVBFKHN1bSwgU1VNX1RZUEVfTk9ERSk7Cj4gPiArICAgICBtZW1jcHkoc3VtLT5lbnRyaWVz
LCBjLnN1bVtDVVJTRUdfQ09MRF9OT0RFXSwKPiA+ICsgICAgICAgICAgICAgICAgICAgICBzaXpl
b2Yoc3RydWN0IGYyZnNfc3VtbWFyeSkgKiBNQVhfQ0FDSEVfU1VNUyk7Cj4gPiArCj4gPiAgICAg
ICBjcF9zZWdfYmxrKys7Cj4gPiAgICAgICBEQkcoMSwgIlx0V3JpdGluZyBTZWdtZW50IHN1bW1h
cnkgZm9yIENPTERfTk9ERSwgYXQgb2Zmc2V0IDB4JTA4IlBSSXg2NCJcbiIsCj4gPiAgICAgICAg
ICAgICAgICAgICAgICAgY3Bfc2VnX2Jsayk7Cj4gPiBAQCAtMTIwOSwxMCArMTI5MCw0MCBAQCB2
b2lkIHVwZGF0ZV9zdW1tYXJ5X2VudHJ5KGludCBjdXJzZWdfdHlwZSwgbmlkX3QgbmlkLAo+ID4g
ICAgICAgc3VtLT5vZnNfaW5fbm9kZSA9IGNwdV90b19sZTE2KG9mc19pbl9ub2RlKTsKPiA+ICB9
Cj4gPgo+ID4gK3N0YXRpYyB2b2lkIGFkZF9kZW50cnkoc3RydWN0IGYyZnNfZGVudHJ5X2Jsb2Nr
ICpkZW50X2JsaywgdW5zaWduZWQgaW50ICpkaWR4LAo+ID4gKyAgICAgICAgICAgICBjb25zdCBj
aGFyICpuYW1lLCB1aW50MzJfdCBpbm8sIHU4IHR5cGUpCj4gPiArewo+ID4gKyAgICAgaW50IGxl
biA9IHN0cmxlbihuYW1lKTsKPiA+ICsgICAgIGYyZnNfaGFzaF90IGhhc2g7Cj4gPiArCj4gPiAr
ICAgICBpZiAobmFtZVswXSA9PSAnLicgJiYgKGxlbiA9PSAxIHx8IChsZW4gPT0gMiAmJiBuYW1l
WzFdID09ICcuJykpKQo+ID4gKyAgICAgICAgICAgICBoYXNoID0gMDsKPiA+ICsgICAgIGVsc2UK
PiA+ICsgICAgICAgICAgICAgaGFzaCA9IGYyZnNfZGVudHJ5X2hhc2goMCwgMCwgKHVuc2lnbmVk
IGNoYXIgKiluYW1lLCBsZW4pOwo+ID4gKwo+ID4gKyAgICAgRjJGU19ERU5UUllfQkxPQ0tfREVO
VFJZKGRlbnRfYmxrLCAqZGlkeCkuaGFzaF9jb2RlID0gY3B1X3RvX2xlMzIoaGFzaCk7Cj4gPiAr
ICAgICBGMkZTX0RFTlRSWV9CTE9DS19ERU5UUlkoZGVudF9ibGssICpkaWR4KS5pbm8gPSBjcHVf
dG9fbGUzMihpbm8pOwo+ID4gKyAgICAgRjJGU19ERU5UUllfQkxPQ0tfREVOVFJZKGRlbnRfYmxr
LCAqZGlkeCkubmFtZV9sZW4gPSBjcHVfdG9fbGUxNihsZW4pOwo+ID4gKyAgICAgRjJGU19ERU5U
UllfQkxPQ0tfREVOVFJZKGRlbnRfYmxrLCAqZGlkeCkuZmlsZV90eXBlID0gdHlwZTsKPiA+ICsK
PiA+ICsgICAgIHdoaWxlIChsZW4gPiBGMkZTX1NMT1RfTEVOKSB7Cj4gPiArICAgICAgICAgICAg
IG1lbWNweShGMkZTX0RFTlRSWV9CTE9DS19GSUxFTkFNRShkZW50X2JsaywgKmRpZHgpLCBuYW1l
LAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRjJGU19TTE9UX0xFTik7Cj4gPiAr
ICAgICAgICAgICAgIHRlc3RfYW5kX3NldF9iaXRfbGUoKmRpZHgsIGRlbnRfYmxrLT5kZW50cnlf
Yml0bWFwKTsKPiA+ICsgICAgICAgICAgICAgbGVuIC09IChpbnQpRjJGU19TTE9UX0xFTjsKPiA+
ICsgICAgICAgICAgICAgbmFtZSArPSBGMkZTX1NMT1RfTEVOOwo+ID4gKyAgICAgICAgICAgICAo
KmRpZHgpKys7Cj4gPiArICAgICB9Cj4gPiArICAgICBtZW1jcHkoRjJGU19ERU5UUllfQkxPQ0tf
RklMRU5BTUUoZGVudF9ibGssICpkaWR4KSwgbmFtZSwgbGVuKTsKPiA+ICsgICAgIHRlc3RfYW5k
X3NldF9iaXRfbGUoKmRpZHgsIGRlbnRfYmxrLT5kZW50cnlfYml0bWFwKTsKPiA+ICsgICAgICgq
ZGlkeCkrKzsKPiA+ICt9Cj4gPiArCj4gPiAgc3RhdGljIGJsb2NrX3QgZjJmc19hZGRfZGVmYXVs
dF9kZW50cnlfcm9vdCh2b2lkKQo+ID4gIHsKPiA+ICAgICAgIHN0cnVjdCBmMmZzX2RlbnRyeV9i
bG9jayAqZGVudF9ibGsgPSBOVUxMOwo+ID4gICAgICAgYmxvY2tfdCBkYXRhX2Jsa2FkZHI7Cj4g
PiArICAgICB1bnNpZ25lZCBpbnQgZGlkeCA9IDA7Cj4gPgo+ID4gICAgICAgZGVudF9ibGsgPSBj
YWxsb2MoRjJGU19CTEtTSVpFLCAxKTsKPiA+ICAgICAgIGlmKGRlbnRfYmxrID09IE5VTEwpIHsK
PiA+IEBAIC0xMjIwLDM3ICsxMzMxLDI2IEBAIHN0YXRpYyBibG9ja190IGYyZnNfYWRkX2RlZmF1
bHRfZGVudHJ5X3Jvb3Qodm9pZCkKPiA+ICAgICAgICAgICAgICAgcmV0dXJuIDA7Cj4gPiAgICAg
ICB9Cj4gPgo+ID4gLSAgICAgRjJGU19ERU5UUllfQkxPQ0tfREVOVFJZKGRlbnRfYmxrLCAwKS5o
YXNoX2NvZGUgPSAwOwo+ID4gLSAgICAgRjJGU19ERU5UUllfQkxPQ0tfREVOVFJZKGRlbnRfYmxr
LCAwKS5pbm8gPSBzYi0+cm9vdF9pbm87Cj4gPiAtICAgICBGMkZTX0RFTlRSWV9CTE9DS19ERU5U
UlkoZGVudF9ibGssIDApLm5hbWVfbGVuID0gY3B1X3RvX2xlMTYoMSk7Cj4gPiAtICAgICBGMkZT
X0RFTlRSWV9CTE9DS19ERU5UUlkoZGVudF9ibGssIDApLmZpbGVfdHlwZSA9IEYyRlNfRlRfRElS
Owo+ID4gLSAgICAgbWVtY3B5KEYyRlNfREVOVFJZX0JMT0NLX0ZJTEVOQU1FKGRlbnRfYmxrLCAw
KSwgIi4iLCAxKTsKPiA+ICsgICAgIGFkZF9kZW50cnkoZGVudF9ibGssICZkaWR4LCAiLiIsCj4g
PiArICAgICAgICAgICAgICAgICAgICAgbGUzMl90b19jcHUoc2ItPnJvb3RfaW5vKSwgRjJGU19G
VF9ESVIpOwo+ID4gKyAgICAgYWRkX2RlbnRyeShkZW50X2JsaywgJmRpZHgsICIuLiIsCj4gPiAr
ICAgICAgICAgICAgICAgICAgICAgbGUzMl90b19jcHUoc2ItPnJvb3RfaW5vKSwgRjJGU19GVF9E
SVIpOwo+ID4KPiA+IC0gICAgIEYyRlNfREVOVFJZX0JMT0NLX0RFTlRSWShkZW50X2JsaywgMSku
aGFzaF9jb2RlID0gMDsKPiA+IC0gICAgIEYyRlNfREVOVFJZX0JMT0NLX0RFTlRSWShkZW50X2Js
aywgMSkuaW5vID0gc2ItPnJvb3RfaW5vOwo+ID4gLSAgICAgRjJGU19ERU5UUllfQkxPQ0tfREVO
VFJZKGRlbnRfYmxrLCAxKS5uYW1lX2xlbiA9IGNwdV90b19sZTE2KDIpOwo+ID4gLSAgICAgRjJG
U19ERU5UUllfQkxPQ0tfREVOVFJZKGRlbnRfYmxrLCAxKS5maWxlX3R5cGUgPSBGMkZTX0ZUX0RJ
UjsKPiA+IC0gICAgIG1lbWNweShGMkZTX0RFTlRSWV9CTE9DS19GSUxFTkFNRShkZW50X2Jsaywg
MSksICIuLiIsIDIpOwo+ID4gLQo+ID4gLSAgICAgLyogYml0bWFwIGZvciAuIGFuZCAuLiAqLwo+
ID4gLSAgICAgdGVzdF9hbmRfc2V0X2JpdF9sZSgwLCBkZW50X2Jsay0+ZGVudHJ5X2JpdG1hcCk7
Cj4gPiAtICAgICB0ZXN0X2FuZF9zZXRfYml0X2xlKDEsIGRlbnRfYmxrLT5kZW50cnlfYml0bWFw
KTsKPiA+IC0KPiA+IC0gICAgIGlmIChjLmxwZl9pbm8pIHsKPiA+IC0gICAgICAgICAgICAgaW50
IGxlbiA9IHN0cmxlbihMUEYpOwo+ID4gLSAgICAgICAgICAgICBmMmZzX2hhc2hfdCBoYXNoID0g
ZjJmc19kZW50cnlfaGFzaCgwLCAwLCAodW5zaWduZWQgY2hhciAqKUxQRiwgbGVuKTsKPiA+ICsg
ICAgIGlmIChjLmxwZl9pbm8pCj4gPiArICAgICAgICAgICAgIGFkZF9kZW50cnkoZGVudF9ibGss
ICZkaWR4LCBMUEYsIGMubHBmX2lubywgRjJGU19GVF9ESVIpOwo+ID4KPiA+IC0gICAgICAgICAg
ICAgRjJGU19ERU5UUllfQkxPQ0tfREVOVFJZKGRlbnRfYmxrLCAyKS5oYXNoX2NvZGUgPSBjcHVf
dG9fbGUzMihoYXNoKTsKPiA+IC0gICAgICAgICAgICAgRjJGU19ERU5UUllfQkxPQ0tfREVOVFJZ
KGRlbnRfYmxrLCAyKS5pbm8gPSBjcHVfdG9fbGUzMihjLmxwZl9pbm8pOwo+ID4gLSAgICAgICAg
ICAgICBGMkZTX0RFTlRSWV9CTE9DS19ERU5UUlkoZGVudF9ibGssIDIpLm5hbWVfbGVuID0gY3B1
X3RvX2xlMTYobGVuKTsKPiA+IC0gICAgICAgICAgICAgRjJGU19ERU5UUllfQkxPQ0tfREVOVFJZ
KGRlbnRfYmxrLCAyKS5maWxlX3R5cGUgPSBGMkZTX0ZUX0RJUjsKPiA+IC0gICAgICAgICAgICAg
bWVtY3B5KEYyRlNfREVOVFJZX0JMT0NLX0ZJTEVOQU1FKGRlbnRfYmxrLCAyKSwgTFBGLCBGMkZT
X1NMT1RfTEVOKTsKPiA+ICsgICAgIGlmIChjLmFsaWFzZWRfZGV2aWNlcykgewo+ID4gKyAgICAg
ICAgICAgICBpbnQgaSwgZGV2X29mZiA9IDA7Cj4gPgo+ID4gLSAgICAgICAgICAgICBtZW1jcHko
RjJGU19ERU5UUllfQkxPQ0tfRklMRU5BTUUoZGVudF9ibGssIDMpLCAmTFBGW0YyRlNfU0xPVF9M
RU5dLAo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuIC0gRjJGU19TTE9UX0xF
Tik7Cj4gPiArICAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPCBjLm5kZXZzOyBpKyspIHsKPiA+
ICsgICAgICAgICAgICAgICAgICAgICBpZiAoIWRldmljZV9pc19hbGlhc2VkKGkpKQo+ID4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7Cj4gPgo+ID4gLSAgICAgICAgICAg
ICB0ZXN0X2FuZF9zZXRfYml0X2xlKDIsIGRlbnRfYmxrLT5kZW50cnlfYml0bWFwKTsKPiA+IC0g
ICAgICAgICAgICAgdGVzdF9hbmRfc2V0X2JpdF9sZSgzLCBkZW50X2Jsay0+ZGVudHJ5X2JpdG1h
cCk7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgYWRkX2RlbnRyeShkZW50X2JsaywgJmRpZHgs
IGMuZGV2aWNlc1tpXS5hbGlhc19maWxlbmFtZSwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgYy5maXJzdF9hbGlhc19pbm8gKyBkZXZfb2ZmLAo+ID4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGMkZTX0ZUX1JFR19GSUxFKTsKPiA+ICsgICAg
ICAgICAgICAgICAgICAgICBkZXZfb2ZmKys7Cj4gPiArICAgICAgICAgICAgIH0KPiA+ICAgICAg
IH0KPiA+Cj4gPiAgICAgICBkYXRhX2Jsa2FkZHIgPSBhbGxvY19uZXh0X2ZyZWVfYmxvY2soQ1VS
U0VHX0hPVF9EQVRBKTsKPiA+IEBAIC0xMzIzLDYgKzE0MjMsNyBAQCBzdGF0aWMgaW50IGYyZnNf
d3JpdGVfZGVmYXVsdF9xdW90YShpbnQgcXR5cGUsIF9fbGUzMiByYXdfaWQpCj4gPiAgICAgICBz
dHJ1Y3QgdjJfZGlza19kcWluZm8gZGRxaW5mbzsKPiA+ICAgICAgIHN0cnVjdCB2MnIxX2Rpc2tf
ZHFibGsgZHFibGs7Cj4gPiAgICAgICBibG9ja190IGJsa2FkZHI7Cj4gPiArICAgICB1aW50NjRf
dCBpY250ID0gMSwgYmNudCA9IDE7Cj4gPiAgICAgICBpbnQgaTsKPiA+Cj4gPiAgICAgICBpZiAo
ZmlsZWJ1ZiA9PSBOVUxMKSB7Cj4gPiBAQCAtMTM1OCwxNiArMTQ1OSwxOCBAQCBzdGF0aWMgaW50
IGYyZnNfd3JpdGVfZGVmYXVsdF9xdW90YShpbnQgcXR5cGUsIF9fbGUzMiByYXdfaWQpCj4gPiAg
ICAgICBkcWJsay5kcWJfcGFkID0gY3B1X3RvX2xlMzIoMCk7Cj4gPiAgICAgICBkcWJsay5kcWJf
aWhhcmRsaW1pdCA9IGNwdV90b19sZTY0KDApOwo+ID4gICAgICAgZHFibGsuZHFiX2lzb2Z0bGlt
aXQgPSBjcHVfdG9fbGU2NCgwKTsKPiA+IC0gICAgIGlmIChjLmxwZl9pbm8pCj4gPiAtICAgICAg
ICAgICAgIGRxYmxrLmRxYl9jdXJpbm9kZXMgPSBjcHVfdG9fbGU2NCgyKTsKPiA+IC0gICAgIGVs
c2UKPiA+IC0gICAgICAgICAgICAgZHFibGsuZHFiX2N1cmlub2RlcyA9IGNwdV90b19sZTY0KDEp
Owo+ID4gKyAgICAgaWYgKGMubHBmX2lubykgewo+ID4gKyAgICAgICAgICAgICBpY250Kys7Cj4g
PiArICAgICAgICAgICAgIGJjbnQrKzsKPiA+ICsgICAgIH0KPiA+ICsgICAgIGlmIChjLmFsaWFz
ZWRfZGV2aWNlcykgewo+ID4gKyAgICAgICAgICAgICBpY250ICs9IGMuYWxpYXNlZF9kZXZpY2Vz
Owo+ID4gKyAgICAgICAgICAgICBiY250ICs9IGMuYWxpYXNlZF9zZWdtZW50cyAqIGMuYmxrc19w
ZXJfc2VnOwo+ID4gKyAgICAgfQo+ID4gKyAgICAgZHFibGsuZHFiX2N1cmlub2RlcyA9IGNwdV90
b19sZTY0KGljbnQpOwo+ID4gICAgICAgZHFibGsuZHFiX2JoYXJkbGltaXQgPSBjcHVfdG9fbGU2
NCgwKTsKPiA+ICAgICAgIGRxYmxrLmRxYl9ic29mdGxpbWl0ID0gY3B1X3RvX2xlNjQoMCk7Cj4g
PiAtICAgICBpZiAoYy5scGZfaW5vKQo+ID4gLSAgICAgICAgICAgICBkcWJsay5kcWJfY3Vyc3Bh
Y2UgPSBjcHVfdG9fbGU2NChGMkZTX0JMS1NJWkUgKiAyKTsKPiA+IC0gICAgIGVsc2UKPiA+IC0g
ICAgICAgICAgICAgZHFibGsuZHFiX2N1cnNwYWNlID0gY3B1X3RvX2xlNjQoRjJGU19CTEtTSVpF
KTsKPiA+ICsgICAgIGRxYmxrLmRxYl9jdXJzcGFjZSA9IGNwdV90b19sZTY0KEYyRlNfQkxLU0la
RSAqIGJjbnQpOwo+ID4gICAgICAgZHFibGsuZHFiX2J0aW1lID0gY3B1X3RvX2xlNjQoMCk7Cj4g
PiAgICAgICBkcWJsay5kcWJfaXRpbWUgPSBjcHVfdG9fbGU2NCgwKTsKPiA+Cj4gPiBAQCAtMTQ5
MCw2ICsxNTkzLDcgQEAgc3RhdGljIGJsb2NrX3QgZjJmc19hZGRfZGVmYXVsdF9kZW50cnlfbHBm
KHZvaWQpCj4gPiAgewo+ID4gICAgICAgc3RydWN0IGYyZnNfZGVudHJ5X2Jsb2NrICpkZW50X2Js
azsKPiA+ICAgICAgIGJsb2NrX3QgZGF0YV9ibGthZGRyOwo+ID4gKyAgICAgdW5zaWduZWQgaW50
IGRpZHggPSAwOwo+ID4KPiA+ICAgICAgIGRlbnRfYmxrID0gY2FsbG9jKEYyRlNfQkxLU0laRSwg
MSk7Cj4gPiAgICAgICBpZiAoZGVudF9ibGsgPT0gTlVMTCkgewo+ID4gQEAgLTE0OTcsMjAgKzE2
MDEsOCBAQCBzdGF0aWMgYmxvY2tfdCBmMmZzX2FkZF9kZWZhdWx0X2RlbnRyeV9scGYodm9pZCkK
PiA+ICAgICAgICAgICAgICAgcmV0dXJuIDA7Cj4gPiAgICAgICB9Cj4gPgo+ID4gLSAgICAgRjJG
U19ERU5UUllfQkxPQ0tfREVOVFJZKGRlbnRfYmxrLCAwKS5oYXNoX2NvZGUgPSAwOwo+ID4gLSAg
ICAgRjJGU19ERU5UUllfQkxPQ0tfREVOVFJZKGRlbnRfYmxrLCAwKS5pbm8gPSBjcHVfdG9fbGUz
MihjLmxwZl9pbm8pOwo+ID4gLSAgICAgRjJGU19ERU5UUllfQkxPQ0tfREVOVFJZKGRlbnRfYmxr
LCAwKS5uYW1lX2xlbiA9IGNwdV90b19sZTE2KDEpOwo+ID4gLSAgICAgRjJGU19ERU5UUllfQkxP
Q0tfREVOVFJZKGRlbnRfYmxrLCAwKS5maWxlX3R5cGUgPSBGMkZTX0ZUX0RJUjsKPiA+IC0gICAg
IG1lbWNweShGMkZTX0RFTlRSWV9CTE9DS19GSUxFTkFNRShkZW50X2JsaywgMCksICIuIiwgMSk7
Cj4gPiAtCj4gPiAtICAgICBGMkZTX0RFTlRSWV9CTE9DS19ERU5UUlkoZGVudF9ibGssIDEpLmhh
c2hfY29kZSA9IDA7Cj4gPiAtICAgICBGMkZTX0RFTlRSWV9CTE9DS19ERU5UUlkoZGVudF9ibGss
IDEpLmlubyA9IHNiLT5yb290X2lubzsKPiA+IC0gICAgIEYyRlNfREVOVFJZX0JMT0NLX0RFTlRS
WShkZW50X2JsaywgMSkubmFtZV9sZW4gPSBjcHVfdG9fbGUxNigyKTsKPiA+IC0gICAgIEYyRlNf
REVOVFJZX0JMT0NLX0RFTlRSWShkZW50X2JsaywgMSkuZmlsZV90eXBlID0gRjJGU19GVF9ESVI7
Cj4gPiAtICAgICBtZW1jcHkoRjJGU19ERU5UUllfQkxPQ0tfRklMRU5BTUUoZGVudF9ibGssIDEp
LCAiLi4iLCAyKTsKPiA+IC0KPiA+IC0gICAgIHRlc3RfYW5kX3NldF9iaXRfbGUoMCwgZGVudF9i
bGstPmRlbnRyeV9iaXRtYXApOwo+ID4gLSAgICAgdGVzdF9hbmRfc2V0X2JpdF9sZSgxLCBkZW50
X2Jsay0+ZGVudHJ5X2JpdG1hcCk7Cj4gPiArICAgICBhZGRfZGVudHJ5KGRlbnRfYmxrLCAmZGlk
eCwgIi4iLCBjLmxwZl9pbm8sIEYyRlNfRlRfRElSKTsKPiA+ICsgICAgIGFkZF9kZW50cnkoZGVu
dF9ibGssICZkaWR4LCAiLi4iLCBjLmxwZl9pbm8sIEYyRlNfRlRfRElSKTsKPiA+Cj4gPiAgICAg
ICBkYXRhX2Jsa2FkZHIgPSBhbGxvY19uZXh0X2ZyZWVfYmxvY2soQ1VSU0VHX0hPVF9EQVRBKTsK
PiA+Cj4gPiBAQCAtMTU3OCw2ICsxNjcwLDEwNCBAQCBleGl0Ogo+ID4gICAgICAgcmV0dXJuIGVy
cjsKPiA+ICB9Cj4gPgo+ID4gK3N0YXRpYyB2b2lkIGFsbG9jYXRlX2Jsb2Nrc19mb3JfYWxpYXNl
ZF9kZXZpY2Uoc3RydWN0IGYyZnNfbm9kZSAqcmF3X25vZGUsCj4gPiArICAgICAgICAgICAgIHVu
c2lnbmVkIGludCBkZXZfbnVtKQo+ID4gK3sKPiA+ICsgICAgIHVpbnQzMl90IHN0YXJ0X3NlZ25v
ID0gKGMuZGV2aWNlc1tkZXZfbnVtXS5zdGFydF9ibGthZGRyIC0KPiA+ICsgICAgICAgICAgICAg
ICAgICAgICBnZXRfc2IobWFpbl9ibGthZGRyKSkgLyBjLmJsa3NfcGVyX3NlZzsKPiA+ICsgICAg
IHVpbnQzMl90IGVuZF9zZWdubyA9IChjLmRldmljZXNbZGV2X251bV0uZW5kX2Jsa2FkZHIgLQo+
ID4gKyAgICAgICAgICAgICAgICAgICAgIGdldF9zYihtYWluX2Jsa2FkZHIpICsgMSkgLyBjLmJs
a3NfcGVyX3NlZzsKPiA+ICsgICAgIHVpbnQzMl90IHNlZ25vOwo+ID4gKyAgICAgdWludDY0X3Qg
YmxrY250Owo+ID4gKyAgICAgc3RydWN0IGYyZnNfc2l0X2Jsb2NrICpzaXRfYmxrID0gY2FsbG9j
KEYyRlNfQkxLU0laRSwgMSk7Cj4gPiArCj4gPiArICAgICBBU1NFUlQoc2l0X2Jsayk7Cj4gPiAr
Cj4gPiArICAgICBmb3IgKHNlZ25vID0gc3RhcnRfc2Vnbm87IHNlZ25vIDwgZW5kX3NlZ25vOyBz
ZWdubysrKSB7Cj4gPiArICAgICAgICAgICAgIHN0cnVjdCBmMmZzX3NpdF9lbnRyeSAqc2l0Owo+
ID4gKyAgICAgICAgICAgICB1aW50NjRfdCBzaXRfYmxrX2FkZHIgPSBnZXRfc2Ioc2l0X2Jsa2Fk
ZHIpICsKPiA+ICsgICAgICAgICAgICAgICAgICAgICAoc2Vnbm8gLyBTSVRfRU5UUllfUEVSX0JM
T0NLKTsKPiA+ICsKPiA+ICsgICAgICAgICAgICAgQVNTRVJUKGRldl9yZWFkX2Jsb2NrKHNpdF9i
bGssIHNpdF9ibGtfYWRkcikgPj0gMCk7Cj4gPiArICAgICAgICAgICAgIHNpdCA9ICZzaXRfYmxr
LT5lbnRyaWVzW3NlZ25vICUgU0lUX0VOVFJZX1BFUl9CTE9DS107Cj4gPiArICAgICAgICAgICAg
IG1lbXNldCgmc2l0LT52YWxpZF9tYXAsIDB4RkYsIFNJVF9WQkxPQ0tfTUFQX1NJWkUpOwo+ID4g
KyAgICAgICAgICAgICBzaXQtPnZibG9ja3MgPSBjcHVfdG9fbGUxNigoQ1VSU0VHX0NPTERfREFU
QSA8PAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTSVRfVkJMT0NL
U19TSElGVCkgfCBjLmJsa3NfcGVyX3NlZyk7Cj4gPiArICAgICAgICAgICAgIHNpdC0+bXRpbWUg
PSBjcHVfdG9fbGU2NChta2ZzX3RpbWUpOwo+ID4gKyAgICAgICAgICAgICBBU1NFUlQoZGV2X3dy
aXRlX2Jsb2NrKHNpdF9ibGssIHNpdF9ibGtfYWRkcikgPj0gMCk7Cj4gPiArICAgICB9Cj4gPiAr
Cj4gPiArICAgICBibGtjbnQgPSAoZW5kX3NlZ25vIC0gc3RhcnRfc2Vnbm8pICogYy5ibGtzX3Bl
cl9zZWc7Cj4gPiArICAgICByYXdfbm9kZS0+aS5pX3NpemUgPSBjcHVfdG9fbGU2NChibGtjbnQg
PDwgZ2V0X3NiKGxvZ19ibG9ja3NpemUpKTsKPiA+ICsgICAgIHJhd19ub2RlLT5pLmlfYmxvY2tz
ID0gY3B1X3RvX2xlNjQoYmxrY250ICsgMSk7Cj4gPiArCj4gPiArICAgICByYXdfbm9kZS0+aS5p
X2V4dC5mb2ZzID0gY3B1X3RvX2xlMzIoMCk7Cj4gPiArICAgICByYXdfbm9kZS0+aS5pX2V4dC5i
bGtfYWRkciA9Cj4gPiArICAgICAgICAgICAgIGNwdV90b19sZTMyKGMuZGV2aWNlc1tkZXZfbnVt
XS5zdGFydF9ibGthZGRyKTsKPiA+ICsgICAgIHJhd19ub2RlLT5pLmlfZXh0LmxlbiA9IGNwdV90
b19sZTMyKGJsa2NudCk7Cj4gPiArCj4gPiArICAgICBmcmVlKHNpdF9ibGspOwo+ID4gK30KPiA+
ICsKPiA+ICtzdGF0aWMgaW50IGYyZnNfd3JpdGVfYWxpYXNfaW5vZGVzKHZvaWQpCj4gPiArewo+
ID4gKyAgICAgc3RydWN0IGYyZnNfbm9kZSAqcmF3X25vZGU7Cj4gPiArICAgICBibG9ja190IG5v
ZGVfYmxrYWRkcjsKPiA+ICsgICAgIGludCBlcnIgPSAwOwo+ID4gKyAgICAgdW5zaWduZWQgaW50
IGksIGRldl9vZmYgPSAwOwo+ID4gKwo+ID4gKyAgICAgQVNTRVJUKGMuYWxpYXNlZF9kZXZpY2Vz
KTsKPiA+ICsKPiA+ICsgICAgIHJhd19ub2RlID0gY2FsbG9jKEYyRlNfQkxLU0laRSwgMSk7Cj4g
PiArICAgICBpZiAocmF3X25vZGUgPT0gTlVMTCkgewo+ID4gKyAgICAgICAgICAgICBNU0coMSwg
Ilx0RXJyb3I6IENhbGxvYyBGYWlsZWQgZm9yIHJhd19ub2RlISEhXG4iKTsKPiA+ICsgICAgICAg
ICAgICAgcmV0dXJuIC0xOwo+ID4gKyAgICAgfQo+ID4gKwo+ID4gKyAgICAgZm9yIChpID0gMTsg
aSA8IGMubmRldnM7IGkrKykgewo+ID4gKyAgICAgICAgICAgICBjb25zdCBjaGFyICpmaWxlbmFt
ZTsKPiA+ICsgICAgICAgICAgICAgbmlkX3QgaW5vOwo+ID4gKwo+ID4gKyAgICAgICAgICAgICBp
ZiAoIWRldmljZV9pc19hbGlhc2VkKGkpKQo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGNvbnRp
bnVlOwo+ID4gKwo+ID4gKyAgICAgICAgICAgICBpbm8gPSBjLmZpcnN0X2FsaWFzX2lubyArIGRl
dl9vZmY7Cj4gPiArICAgICAgICAgICAgIGRldl9vZmYrKzsKPiA+ICsgICAgICAgICAgICAgZjJm
c19pbml0X2lub2RlKHNiLCByYXdfbm9kZSwgaW5vLCBta2ZzX3RpbWUsIDB4ODFjMCk7Cj4gPiAr
Cj4gPiArICAgICAgICAgICAgIHJhd19ub2RlLT5pLmlfZmxhZ3MgPSBjcHVfdG9fbGUzMihGMkZT
X0lNTVVUQUJMRV9GTCB8Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGMkZTX0RF
VklDRV9BTElBU19GTCk7Cj4gPiArICAgICAgICAgICAgIHJhd19ub2RlLT5pLmlfaW5saW5lID0g
RjJGU19QSU5fRklMRTsKPiA+ICsgICAgICAgICAgICAgcmF3X25vZGUtPmkuaV9waW5vID0gc2It
PnJvb3RfaW5vOwo+ID4gKyAgICAgICAgICAgICBmaWxlbmFtZSA9IGMuZGV2aWNlc1tpXS5hbGlh
c19maWxlbmFtZTsKPiA+ICsgICAgICAgICAgICAgcmF3X25vZGUtPmkuaV9uYW1lbGVuID0gY3B1
X3RvX2xlMzIoc3RybGVuKGZpbGVuYW1lKSk7Cj4gPiArICAgICAgICAgICAgIG1lbWNweShyYXdf
bm9kZS0+aS5pX25hbWUsIGZpbGVuYW1lLCBzdHJsZW4oZmlsZW5hbWUpKTsKPiA+ICsKPiA+ICsg
ICAgICAgICAgICAgbm9kZV9ibGthZGRyID0gYWxsb2NfbmV4dF9mcmVlX2Jsb2NrKENVUlNFR19D
T0xEX05PREUpOwo+ID4gKyAgICAgICAgICAgICBGMkZTX05PREVfRk9PVEVSKHJhd19ub2RlKS0+
bmV4dF9ibGthZGRyID0KPiA+ICsgICAgICAgICAgICAgICAgICAgICBjcHVfdG9fbGUzMihub2Rl
X2Jsa2FkZHIgKyAxKTsKPiA+ICsKPiA+ICsgICAgICAgICAgICAgYWxsb2NhdGVfYmxvY2tzX2Zv
cl9hbGlhc2VkX2RldmljZShyYXdfbm9kZSwgaSk7Cj4gPiArCj4gPiArICAgICAgICAgICAgIERC
RygxLCAiXHRXcml0aW5nIGFsaWFzZWQgZGV2aWNlIGlub2RlIChjb2xkIG5vZGUpLCAiCj4gPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib2Zmc2V0IDB4JXhcbiIsIG5vZGVfYmxrYWRk
cik7Cj4gPiArICAgICAgICAgICAgIGlmICh3cml0ZV9pbm9kZShyYXdfbm9kZSwgbm9kZV9ibGth
ZGRyKSA8IDApIHsKPiA+ICsgICAgICAgICAgICAgICAgICAgICBNU0coMSwgIlx0RXJyb3I6IFdo
aWxlIHdyaXRpbmcgdGhlIHJhd19ub2RlIHRvICIKPiA+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgImRpc2shISFcbiIpOwo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGVy
ciA9IC0xOwo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGdvdG8gZXhpdDsKPiA+ICsgICAgICAg
ICAgICAgfQo+ID4gKwo+ID4gKyAgICAgICAgICAgICB1cGRhdGVfbmF0X2pvdXJuYWwoaW5vLCBu
b2RlX2Jsa2FkZHIpOwo+ID4gKyAgICAgICAgICAgICB1cGRhdGVfc2l0X2pvdXJuYWwoQ1VSU0VH
X0NPTERfTk9ERSk7Cj4gPiArICAgICAgICAgICAgIHVwZGF0ZV9zdW1tYXJ5X2VudHJ5KENVUlNF
R19DT0xEX05PREUsIGlubywgMCk7Cj4gPiArICAgICB9Cj4gPiArCj4gPiArZXhpdDoKPiA+ICsg
ICAgIGZyZWUocmF3X25vZGUpOwo+ID4gKyAgICAgcmV0dXJuIGVycjsKPiA+ICt9Cj4gPiArCj4g
PiAgc3RhdGljIGludCBmMmZzX2NyZWF0ZV9yb290X2Rpcih2b2lkKQo+ID4gIHsKPiA+ICAgICAg
IGVudW0gcXVvdGFfdHlwZSBxdHlwZTsKPiA+IEBAIC0xNjA3LDYgKzE3OTcsMTUgQEAgc3RhdGlj
IGludCBmMmZzX2NyZWF0ZV9yb290X2Rpcih2b2lkKQo+ID4gICAgICAgICAgICAgICB9Cj4gPiAg
ICAgICB9Cj4gPgo+ID4gKyAgICAgaWYgKGMuYWxpYXNlZF9kZXZpY2VzKSB7Cj4gPiArICAgICAg
ICAgICAgIGVyciA9IGYyZnNfd3JpdGVfYWxpYXNfaW5vZGVzKCk7Cj4gPiArICAgICAgICAgICAg
IGlmIChlcnIgPCAwKSB7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgTVNHKDEsICJcdEVycm9y
OiBGYWlsZWQgdG8gd3JpdGUgYWxpYXNlZCBkZXZpY2UgIgo+ID4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgImlub2RlcyEhIVxuIik7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgZ290
byBleGl0Owo+ID4gKyAgICAgICAgICAgICB9Cj4gPiArICAgICB9Cj4gPiArCj4gPiAgI2lmbmRl
ZiBXSVRIX0FORFJPSUQKPiA+ICAgICAgIGVyciA9IGYyZnNfZGlzY2FyZF9vYnNvbGV0ZV9kbm9k
ZSgpOwo+ID4gICAgICAgaWYgKGVyciA8IDApIHsKPiA+IGRpZmYgLS1naXQgYS9ta2ZzL2YyZnNf
Zm9ybWF0X21haW4uYyBiL21rZnMvZjJmc19mb3JtYXRfbWFpbi5jCj4gPiBpbmRleCAyYmExYzIx
Li5iMTEzYmJjIDEwMDY0NAo+ID4gLS0tIGEvbWtmcy9mMmZzX2Zvcm1hdF9tYWluLmMKPiA+ICsr
KyBiL21rZnMvZjJmc19mb3JtYXRfbWFpbi5jCj4gPiBAQCAtNTAsNyArNTAsNyBAQCBzdGF0aWMg
dm9pZCBta2ZzX3VzYWdlKCkKPiA+ICAgICAgIE1TRygwLCAiXG5Vc2FnZTogbWtmcy5mMmZzIFtv
cHRpb25zXSBkZXZpY2UgW3NlY3RvcnNdXG4iKTsKPiA+ICAgICAgIE1TRygwLCAiW29wdGlvbnNd
OlxuIik7Cj4gPiAgICAgICBNU0coMCwgIiAgLWIgZmlsZXN5c3RlbSBibG9jayBzaXplIFtkZWZh
dWx0OjQwOTZdXG4iKTsKPiA+IC0gICAgIE1TRygwLCAiICAtYyBbZGV2aWNlX25hbWVdIHVwIHRv
IDcgYWRkaXRpb25hbCBkZXZpY2VzLCBleGNlcHQgbWV0YSBkZXZpY2VcbiIpOwo+ID4gKyAgICAg
TVNHKDAsICIgIC1jIFtkZXZpY2VfbmFtZVtAYWxpYXNfZmlsZW5hbWVdXSB1cCB0byA3IGFkZGl0
aW9uYWwgZGV2aWNlcywgZXhjZXB0IG1ldGEgZGV2aWNlXG4iKTsKPiA+ICAgICAgIE1TRygwLCAi
ICAtZCBkZWJ1ZyBsZXZlbCBbZGVmYXVsdDowXVxuIik7Cj4gPiAgICAgICBNU0coMCwgIiAgLWUg
W2NvbGQgZmlsZSBleHQgbGlzdF0gZS5nLiBcIm1wMyxnaWYsbW92XCJcbiIpOwo+ID4gICAgICAg
TVNHKDAsICIgIC1FIFtob3QgZmlsZSBleHQgbGlzdF0gZS5nLiBcImRiXCJcbiIpOwo+ID4gQEAg
LTEwNSw2ICsxMDUsOSBAQCBzdGF0aWMgdm9pZCBmMmZzX3Nob3dfaW5mbygpCj4gPgo+ID4gICAg
ICAgaWYgKGMuZmVhdHVyZSAmIEYyRlNfRkVBVFVSRV9DT01QUkVTU0lPTikKPiA+ICAgICAgICAg
ICAgICAgTVNHKDAsICJJbmZvOiBFbmFibGUgQ29tcHJlc3Npb25cbiIpOwo+ID4gKwo+ID4gKyAg
ICAgaWYgKGMuZmVhdHVyZSAmIEYyRlNfRkVBVFVSRV9ERVZJQ0VfQUxJQVMpCj4gPiArICAgICAg
ICAgICAgIE1TRygwLCAiSW5mbzogRW5hYmxlIGRldmljZSBhbGlhc2luZ1xuIik7Cj4gPiAgfQo+
ID4KPiA+ICAjaWYgZGVmaW5lZChBTkRST0lEX1RBUkdFVCkgJiYgZGVmaW5lZChIQVZFX1NZU19V
VFNOQU1FX0gpCj4gPiBAQCAtMTgxLDYgKzE4NCw3IEBAIHN0YXRpYyB2b2lkIGYyZnNfcGFyc2Vf
b3B0aW9ucyhpbnQgYXJnYywgY2hhciAqYXJndltdKQo+ID4gICAgICAgaW50MzJfdCBvcHRpb249
MDsKPiA+ICAgICAgIGludCB2YWw7Cj4gPiAgICAgICBjaGFyICp0b2tlbjsKPiA+ICsgICAgIGlu
dCBkZXZfbnVtOwo+ID4KPiA+ICAgICAgIHdoaWxlICgob3B0aW9uID0gZ2V0b3B0X2xvbmcoYXJn
Yyxhcmd2LG9wdGlvbl9zdHJpbmcsbG9uZ19vcHRzLE5VTEwpKSAhPSBFT0YpIHsKPiA+ICAgICAg
ICAgICAgICAgc3dpdGNoIChvcHRpb24pIHsKPiA+IEBAIC0yMDAsMTcgKzIwNCwzNSBAQCBzdGF0
aWMgdm9pZCBmMmZzX3BhcnNlX29wdGlvbnMoaW50IGFyZ2MsIGNoYXIgKmFyZ3ZbXSkKPiA+ICAg
ICAgICAgICAgICAgICAgICAgICB9Cj4gPiAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7Cj4g
PiAgICAgICAgICAgICAgIGNhc2UgJ2MnOgo+ID4gLSAgICAgICAgICAgICAgICAgICAgIGlmIChj
Lm5kZXZzID49IE1BWF9ERVZJQ0VTKSB7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgZGV2X251
bSA9IGMubmRldnM7Cj4gPiArCj4gPiArICAgICAgICAgICAgICAgICAgICAgaWYgKGRldl9udW0g
Pj0gTUFYX0RFVklDRVMpIHsKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1TRygw
LCAiRXJyb3I6IFRvbyBtYW55IGRldmljZXNcbiIpOwo+ID4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgbWtmc191c2FnZSgpOwo+ID4gICAgICAgICAgICAgICAgICAgICAgIH0KPiA+Cj4g
PiAtICAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmxlbihvcHRhcmcpID4gTUFYX1BBVEhfTEVO
KSB7Cj4gPiArICAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSBzdHJ0b2sob3B0YXJnLCAiQCIp
Owo+ID4gKyAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJsZW4odG9rZW4pID4gTUFYX1BBVEhf
TEVOKSB7Cj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNU0coMCwgIkVycm9yOiBk
ZXZpY2UgcGF0aCBzaG91bGQgYmUgbGVzcyB0aGFuICIKPiA+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIiVkIGNoYXJhY3RlcnNcbiIsIE1BWF9QQVRIX0xFTik7Cj4gPiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBta2ZzX3VzYWdlKCk7Cj4gPiAgICAgICAgICAg
ICAgICAgICAgICAgfQo+ID4gLSAgICAgICAgICAgICAgICAgICAgIGMuZGV2aWNlc1tjLm5kZXZz
KytdLnBhdGggPSBzdHJkdXAob3B0YXJnKTsKPiA+ICsgICAgICAgICAgICAgICAgICAgICBjLmRl
dmljZXNbZGV2X251bV0ucGF0aCA9IHN0cmR1cCh0b2tlbik7Cj4gPiArICAgICAgICAgICAgICAg
ICAgICAgdG9rZW4gPSBzdHJ0b2soTlVMTCwgIiIpOwo+ID4gKyAgICAgICAgICAgICAgICAgICAg
IGlmICh0b2tlbikgewo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmxl
bih0b2tlbikgPiBNQVhfUEFUSF9MRU4pIHsKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgTVNHKDAsICJFcnJvcjogYWxpYXNfZmlsZW5hbWUgc2hvdWxkICIKPiA+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYmUgbGVzcyB0aGFu
ICVkIGNoYXJhY3RlcnNcbiIsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgTUFYX1BBVEhfTEVOKTsKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgbWtmc191c2FnZSgpOwo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgfQo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5kZXZpY2VzW2Rldl9udW1d
LmFsaWFzX2ZpbGVuYW1lID0KPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc3RyZHVwKHRva2VuKTsKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgh
Yy5hbGlhc2VkX2RldmljZXMpCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIGMuZmVhdHVyZSB8PSBGMkZTX0ZFQVRVUkVfREVWSUNFX0FMSUFTOwo+ID4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgYy5hbGlhc2VkX2RldmljZXMrKzsKPiA+ICsgICAgICAgICAg
ICAgICAgICAgICB9Cj4gPiArICAgICAgICAgICAgICAgICAgICAgYy5uZGV2cysrOwo+ID4gICAg
ICAgICAgICAgICAgICAgICAgIGJyZWFrOwo+ID4gICAgICAgICAgICAgICBjYXNlICdkJzoKPiA+
ICAgICAgICAgICAgICAgICAgICAgICBjLmRiZ19sdiA9IGF0b2kob3B0YXJnKTsKPiA+IC0tCj4g
PiAyLjQ2LjAuNjYyLmc5MmQwODgxYmIwLWdvb2cKPiA+CgoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KTGludXgtZjJmcy1kZXZlbCBtYWlsaW5nIGxpc3QK
TGludXgtZjJmcy1kZXZlbEBsaXN0cy5zb3VyY2Vmb3JnZS5uZXQKaHR0cHM6Ly9saXN0cy5zb3Vy
Y2Vmb3JnZS5uZXQvbGlzdHMvbGlzdGluZm8vbGludXgtZjJmcy1kZXZlbAo=
